"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,r){"use strict";function n(e,t){return G(new(G(function(){},{prototype:e})),t)}function o(e){return B(arguments,function(t){t!==e&&B(t,function(t,r){e.hasOwnProperty(r)||(e[r]=t)})}),e}function a(e,t){var r=[];for(var n in e.path){if(e.path[n]!==t.path[n])break;r.push(e.path[n])}return r}function i(e){if(Object.keys)return Object.keys(e);var t=[];return B(e,function(e,r){t.push(r)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var r=e.length>>>0,n=Number(arguments[2])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=r);n<r;n++)if(n in e&&e[n]===t)return n;return-1}function u(e,t,r,n){var o,u=a(r,n),c={},l=[];for(var f in u)if(u[f]&&u[f].params&&(o=i(u[f].params),o.length))for(var d in o)s(l,o[d])>=0||(l.push(o[d]),c[o[d]]=e[o[d]]);return G({},c,t)}function c(e,t,r){if(!r){r=[];for(var n in e)r.push(n)}for(var o=0;o<r.length;o++){var a=r[o];if(e[a]!=t[a])return!1}return!0}function l(e,t){var r={};return B(e,function(e){r[e]=t[e]}),r}function f(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return B(r,function(r){r in e&&(t[r]=e[r])}),t}function d(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var n in e)s(r,n)==-1&&(t[n]=e[n]);return t}function p(e,t){var r=L(e),n=r?[]:{};return B(e,function(e,o){t(e,o)&&(n[r?n.length:o]=e)}),n}function v(e,t){var r=L(e)?[]:{};return B(e,function(e,n){r[n]=t(e,n)}),r}function m(e){return e.then(r,function(){})&&e}function h(e,t){var n=1,a=2,u={},c=[],l=u,f=G(e.when(u),{$$promises:u,$$values:u});this.study=function(u){function p(e,r){if(y[r]!==a){if(g.push(r),y[r]===n)throw g.splice(0,s(g,r)),new Error("Cyclic dependency: "+g.join(" -> "));if(y[r]=n,_(e))$.push(r,[function(){return t.get(e)}],c);else{var o=t.annotate(e);B(o,function(e){e!==r&&u.hasOwnProperty(e)&&p(u[e],e)}),$.push(r,e,o)}g.pop(),y[r]=a}}function v(e){return R(e)&&e.then&&e.$$promises}if(!R(u))throw new Error("'invocables' must be an object");var h=i(u||{}),$=[],g=[],y={};return B(u,p),u=g=y=null,function(n,a,i){function s(){--b||(S||o(w,a.$$values),g.$$values=w,g.$$promises=g.$$promises||!0,delete g.$$inheritedValues,p.resolve(w))}function u(e){g.$$failure=e,p.reject(e)}function c(r,o,a){function c(e){f.reject(e),u(e)}function l(){if(!D(g.$$failure))try{f.resolve(t.invoke(o,i,w)),f.promise.then(function(e){w[r]=e,s()},c)}catch(e){c(e)}}var f=e.defer(),d=0;B(a,function(e){y.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(d++,y[e].then(function(t){w[e]=t,--d||l()},c))}),d||l(),y[r]=m(f.promise)}if(v(n)&&i===r&&(i=a,a=n,n=null),n){if(!R(n))throw new Error("'locals' must be an object")}else n=l;if(a){if(!v(a))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else a=f;var p=e.defer(),g=m(p.promise),y=g.$$promises={},w=G({},n),b=1+$.length/3,S=!1;if(m(g),D(a.$$failure))return u(a.$$failure),g;a.$$inheritedValues&&o(w,d(a.$$inheritedValues,h)),G(y,a.$$promises),a.$$values?(S=o(w,d(a.$$values,h)),g.$$inheritedValues=d(a.$$values,h),s()):(a.$$inheritedValues&&(g.$$inheritedValues=d(a.$$inheritedValues,h)),a.then(s,u));for(var C=0,x=$.length;C<x;C+=3)n.hasOwnProperty($[C])?s():c($[C],$[C+1],$[C+2]);return g}},this.resolve=function(e,t,r,n){return this.study(e)(t,r,n)}}function $(){var e=t.version.minor<3;this.shouldUnsafelyUseHttp=function(t){e=!!t},this.$get=["$http","$templateCache","$injector",function(t,r,n){return new g(t,r,n,e)}]}function g(e,t,r,n){this.fromConfig=function(e,t,r){return D(e.template)?this.fromString(e.template,t):D(e.templateUrl)?this.fromUrl(e.templateUrl,t):D(e.templateProvider)?this.fromProvider(e.templateProvider,t,r):null},this.fromString=function(e,t){return N(e)?e(t):e},this.fromUrl=function(o,a){return N(o)&&(o=o(a)),null==o?null:n?e.get(o,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data}):r.get("$templateRequest")(o)},this.fromProvider=function(e,t,n){return r.invoke(e,null,n||{params:t})}}function y(e,t,o){function a(t,r,n,o){if(h.push(t),v[t])return v[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(m[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return m[t]=new Y.Param(t,r,n,o),m[t]}function i(e,t,r,n){var o=["",""],a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;switch(r){case!1:o=["(",")"+(n?"?":"")];break;case!0:a=a.replace(/\/$/,""),o=["(?:/(",")|/)?"];break;default:o=["("+r+"|",")?"]}return a+o[0]+t+o[1]}function s(o,a){var i,s,u,c,l;return i=o[2]||o[3],l=t.params[i],u=e.substring(d,o.index),s=a?o[4]:o[4]||("*"==o[1]?".*":null),s&&(c=Y.type(s)||n(Y.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":r)})),{id:i,regexp:s,segment:u,type:c,cfg:l}}t=G({params:{}},R(t)?t:{});var u,c=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",d=0,p=this.segments=[],v=o?o.params:{},m=this.params=o?o.params.$$new():new Y.ParamSet,h=[];this.source=e;for(var $,g,y;(u=c.exec(e))&&($=s(u,!1),!($.segment.indexOf("?")>=0));)g=a($.id,$.type,$.cfg,"path"),f+=i($.segment,g.type.pattern.source,g.squash,g.isOptional),p.push($.segment),d=c.lastIndex;y=e.substring(d);var w=y.indexOf("?");if(w>=0){var b=this.sourceSearch=y.substring(w);if(y=y.substring(0,w),this.sourcePath=e.substring(0,d+w),b.length>0)for(d=0;u=l.exec(b);)$=s(u,!0),g=a($.id,$.type,$.cfg,"search"),d=c.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=i(y)+(t.strict===!1?"/?":"")+"$",p.push(y),this.regexp=new RegExp(f,t.caseInsensitive?"i":r),this.prefix=p[0],this.$$paramNames=h}function w(e){G(this,e)}function b(){function e(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function o(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function a(){return{strict:m,caseInsensitive:d}}function u(e){return N(e)||L(e)&&N(e[e.length-1])}function c(){for(;S.length;){var e=S.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend($[e.name],f.invoke(e.def))}}function l(e){G(this,e||{})}Y=this;var f,d=!1,m=!0,h=!1,$={},g=!0,S=[],C={string:{encode:e,decode:o,is:function(e){return null==e||!D(e)||"string"==typeof e},pattern:/[^\/]*/},int:{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return e!==r&&null!==e&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):r},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):r},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};b.$$getDefaultValue=function(e){if(!u(e.value))return e.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(e.value)},this.caseInsensitive=function(e){return D(e)&&(d=e),d},this.strictMode=function(e){return D(e)&&(m=e),m},this.defaultSquashPolicy=function(e){if(!D(e))return h;if(e!==!0&&e!==!1&&!_(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return h=e,e},this.compile=function(e,t){return new y(e,G(a(),t))},this.isMatcher=function(e){if(!R(e))return!1;var t=!0;return B(y.prototype,function(r,n){N(r)&&(t=t&&D(e[n])&&N(e[n]))}),t},this.type=function(e,t,r){if(!D(t))return $[e];if($.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return $[e]=new w(G({name:e},t)),r&&(S.push({name:e,def:r}),g||c()),this},B(C,function(e,t){$[t]=new w(G({name:t},e))}),$=n($,{}),this.$get=["$injector",function(e){return f=e,g=!1,c(),B(C,function(e,t){$[t]||($[t]=new w(e))}),this}],this.Param=function(e,n,o,a){function c(e){var t=R(e)?i(e):[],r=s(t,"value")===-1&&s(t,"type")===-1&&s(t,"squash")===-1&&s(t,"array")===-1;return r&&(e={value:e}),e.$$fn=u(e.value)?e.value:function(){return e.value},e}function l(r,n,o){if(r.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:r.type?t.isString(r.type)?$[r.type]:r.type instanceof w?r.type:new w(r.type):"config"===o?$.any:$.string}function d(){var t={array:"search"===a&&"auto"},r=e.match(/\[\]$/)?{array:!0}:{};return G(t,r,o).array}function m(e,t){var r=e.squash;if(!t||r===!1)return!1;if(!D(r)||null==r)return h;if(r===!0||_(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function g(e,t,n,o){var a,i,u=[{from:"",to:n||t?r:""},{from:null,to:n||t?r:""}];return a=L(e.replace)?e.replace:[],_(o)&&a.push({from:o,to:r}),i=v(a,function(e){return e.from}),p(u,function(e){return s(i,e.from)===-1}).concat(a)}function y(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var e=f.invoke(o.$$fn);if(null!==e&&e!==r&&!C.type.is(e))throw new Error("Default value ("+e+") for parameter '"+C.id+"' is not an instance of Type ("+C.type.name+")");return e}function b(e){function t(e){return function(t){return t.from===e}}function r(e){var r=v(p(C.replace,t(e)),function(e){return e.to});return r.length?r[0]:e}return e=r(e),D(e)?C.type.$normalize(e):y()}function S(){return"{Param:"+e+" "+n+" squash: '"+q+"' optional: "+E+"}"}var C=this;o=c(o),n=l(o,n,a);var x=d();n=x?n.$asArray(x,"search"===a):n,"string"!==n.name||x||"path"!==a||o.value!==r||(o.value="");var E=o.value!==r,q=m(o,E),k=g(o,x,E,q);G(this,{id:e,type:n,location:a,array:x,squash:q,replace:k,isOptional:E,value:b,dynamic:r,config:o,toString:S})},l.prototype={$$new:function(){return n(this,G(new l,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],r=this,n=i(l.prototype);r;)t.push(r),r=r.$$parent;return t.reverse(),B(t,function(t){B(i(t),function(t){s(e,t)===-1&&s(n,t)===-1&&e.push(t)})}),e},$$values:function(e){var t={},r=this;return B(r.$$keys(),function(n){t[n]=r[n].value(e&&e[n])}),t},$$equals:function(e,t){var r=!0,n=this;return B(n.$$keys(),function(o){var a=e&&e[o],i=t&&t[o];n[o].type.equals(a,i)||(r=!1)}),r},$$validates:function(e){var n,o,a,i,s,u=this.$$keys();for(n=0;n<u.length&&(o=this[u[n]],a=e[u[n]],a!==r&&null!==a||!o.isOptional);n++){if(i=o.type.$normalize(a),!o.type.is(i))return!1;if(s=o.type.encode(i),t.isString(s)&&!o.type.pattern.exec(s))return!1}return!0},$$parent:r},this.ParamSet=l}function S(e,n){function o(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function a(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})}function i(e,t,r){if(!r)return!1;var n=e.invoke(t,t,{$match:r});return!D(n)||n}function s(n,o,a,i,s){function d(e,t,r){return"/"===h?e:t?h.slice(0,-1)+e:r?h.slice(1)+e:e}function p(e){function t(e){var t=e(a,n);return!!t&&(_(t)&&n.replace().url(t),!0)}if(!e||!e.defaultPrevented){m&&n.url()===m,m=r;var o,i=c.length;for(o=0;o<i;o++)if(t(c[o]))return;l&&t(l)}}function v(){return u=u||o.$on("$locationChangeSuccess",p)}var m,h=i.baseHref(),$=n.url();return f||v(),{sync:function(){p()},listen:function(){return v()},update:function(e){return e?void($=n.url()):void(n.url()!==$&&(n.url($),n.replace()))},push:function(e,t,o){var a=e.format(t||{});null!==a&&t&&t["#"]&&(a+="#"+t["#"]),n.url(a),m=o&&o.$$avoidResync?n.url():r,o&&o.replace&&n.replace()},href:function(r,o,a){if(!r.validates(o))return null;var i=e.html5Mode();t.isObject(i)&&(i=i.enabled),i=i&&s.history;var u=r.format(o);if(a=a||{},i||null===u||(u="#"+e.hashPrefix()+u),null!==u&&o&&o["#"]&&(u+="#"+o["#"]),u=d(u,i,a.absolute),!a.absolute||!u)return u;var c=!i&&u?"/":"",l=n.port();return l=80===l||443===l?"":":"+l,[n.protocol(),"://",n.host(),l,c,u].join("")}}}var u,c=[],l=null,f=!1;this.rule=function(e){if(!N(e))throw new Error("'rule' must be a function");return c.push(e),this},this.otherwise=function(e){if(_(e)){var t=e;e=function(){return t}}else if(!N(e))throw new Error("'rule' must be a function");return l=e,this},this.when=function(e,t){var r,s=_(t);if(_(e)&&(e=n.compile(e)),!s&&!N(t)&&!L(t))throw new Error("invalid 'handler' in when()");var u={matcher:function(e,t){return s&&(r=n.compile(t),t=["$match",function(e){return r.format(e)}]),G(function(r,n){return i(r,t,e.exec(n.path(),n.search()))},{prefix:_(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(r=t,t=["$match",function(e){return a(r,e)}]),G(function(r,n){return i(r,t,e.exec(n.path()))},{prefix:o(e)})}},c={matcher:n.isMatcher(e),regex:e instanceof RegExp};for(var l in c)if(c[l])return this.rule(u[l](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===r&&(e=!0),f=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function C(e,o){function a(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function d(e,t){if(!e)return r;var n=_(e),o=n?e:e.name,i=a(o);if(i){if(!t)throw new Error("No reference point given for path '"+o+"'");t=d(t);for(var s=o.split("."),u=0,c=s.length,l=t;u<c;u++)if(""!==s[u]||0!==u){if("^"!==s[u])break;if(!l.parent)throw new Error("Path '"+o+"' not valid for state '"+t.name+"'");l=l.parent}else l=t;s=s.slice(u).join("."),o=l.name+(l.name&&s?".":"")+s}var f=q[o];return!f||!n&&(n||f!==e&&f.self!==e)?r:f}function p(e,t){k[e]||(k[e]=[]),k[e].push(t)}function h(e){for(var t=k[e]||[];t.length;)$(t.shift())}function $(t){t=n(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var r=t.name;if(!_(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(q.hasOwnProperty(r))throw new Error("State '"+r+"' is already defined");var o=r.indexOf(".")!==-1?r.substring(0,r.lastIndexOf(".")):_(t.parent)?t.parent:R(t.parent)&&_(t.parent.name)?t.parent.name:"";if(o&&!q[o])return p(o,t.self);for(var a in M)N(M[a])&&(t[a]=M[a](t,M.$delegates[a]));return q[r]=t,!t[P]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,r){E.$current.navigable==t&&c(e,r)||E.transitionTo(t,e,{inherit:!0,location:!1})}]),h(r),t}function g(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),r=E.$current.name.split("."),n=0,o=t.length;n<o;n++)"*"===t[n]&&(r[n]="*");return"**"===t[0]&&(r=r.slice(s(r,t[1])),r.unshift("**")),"**"===t[t.length-1]&&(r.splice(s(r,t[t.length-2])+1,Number.MAX_VALUE),r.push("**")),t.length==r.length&&r.join("")===t.join("")}function w(e,t){return _(e)&&!D(t)?M[e]:N(t)&&_(e)?(M[e]&&!M.$delegates[e]&&(M.$delegates[e]=M[e]),M[e]=t,this):this}function b(e,t){return R(e)?t=e:t.name=e,$(t),this}function S(e,o,a,s,c,f,p,h,$){function w(t,r,n,a){var i=e.$broadcast("$stateNotFound",t,r,n);if(i.defaultPrevented)return p.update(),j;if(!i.retry)return null;if(a.$retry)return p.update(),A;var s=E.transition=o.when(i.retry);return s.then(function(){return s!==E.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,r,n),k):(t.options.$retry=!0,E.transitionTo(t.to,t.toParams,t.options))},function(){return j}),p.update(),s}function b(e,r,n,i,u,f){function d(){var r=[];return B(e.views,function(n,o){var i=n.resolve&&n.resolve!==e.resolve?n.resolve:{};i.$template=[function(){return a.load(o,{view:n,locals:u.globals,params:p,notify:f.notify})||""}],r.push(c.resolve(i,u.globals,u.resolve,e).then(function(r){if(N(n.controllerProvider)||L(n.controllerProvider)){var a=t.extend({},i,u.globals);r.$$controller=s.invoke(n.controllerProvider,null,a)}else r.$$controller=n.controller;r.$$state=e,r.$$controllerAs=n.controllerAs,r.$$resolveAs=n.resolveAs,u[o]=r}))}),o.all(r).then(function(){return u.globals})}var p=n?r:l(e.params.$$keys(),r),v={$stateParams:p};u.resolve=c.resolve(e.resolve,v,u.resolve,e);var m=[u.resolve.then(function(e){u.globals=e})];return i&&m.push(i),o.all(m).then(d).then(function(e){return u})}var S=new Error("transition superseded"),k=m(o.reject(S)),M=m(o.reject(new Error("transition prevented"))),j=m(o.reject(new Error("transition aborted"))),A=m(o.reject(new Error("transition failed")));return x.locals={resolve:null,globals:{$stateParams:{}}},E={params:{},current:x.self,$current:x,transition:null},E.reload=function(e){return E.transitionTo(E.current,f,{reload:e||!0,inherit:!1,notify:!0})},E.go=function(e,t,r){return E.transitionTo(e,t,G({inherit:!0,relative:E.$current},r))},E.transitionTo=function(t,r,a){r=r||{},a=G({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},a||{});var i,c=E.$current,v=E.params,h=c.path,$=d(t,a.relative),g=r["#"];if(!D($)){var y={to:t,toParams:r,options:a},q=w(y,c.self,v,a);if(q)return q;if(t=y.to,r=y.toParams,a=y.options,$=d(t,a.relative),!D($)){if(!a.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+a.relative+"'")}}if($[P])throw new Error("Cannot transition to abstract state '"+t+"'");if(a.inherit&&(r=u(f,r||{},E.$current,$)),!$.params.$$validates(r))return A;r=$.params.$$values(r),t=$;var j=t.path,z=0,I=j[z],F=x.locals,V=[];if(a.reload){if(_(a.reload)||R(a.reload)){if(R(a.reload)&&!a.reload.name)throw new Error("Invalid reload state object");var O=a.reload===!0?h[0]:d(a.reload);if(a.reload&&!O)throw new Error("No such reload state '"+(_(a.reload)?a.reload:a.reload.name)+"'");for(;I&&I===h[z]&&I!==O;)F=V[z]=I.locals,z++,I=j[z]}}else for(;I&&I===h[z]&&I.ownParams.$$equals(r,v);)F=V[z]=I.locals,z++,I=j[z];if(C(t,r,c,v,F,a))return g&&(r["#"]=g),E.params=r,K(E.params,f),K(l(t.params.$$keys(),f),t.locals.globals.$stateParams),a.location&&t.navigable&&t.navigable.url&&(p.push(t.navigable.url,r,{$$avoidResync:!0,replace:"replace"===a.location}),p.update(!0)),E.transition=null,o.when(E.current);if(r=l(t.params.$$keys(),r||{}),g&&(r["#"]=g),a.notify&&e.$broadcast("$stateChangeStart",t.self,r,c.self,v,a).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,r,c.self,v),null==E.transition&&p.update(),M;for(var U=o.when(F),T=z;T<j.length;T++,I=j[T])F=V[T]=n(F),U=b(I,r,I===t,U,F,a);var N=E.transition=U.then(function(){var n,o,i;if(E.transition!==N)return e.$broadcast("$stateChangeCancel",t.self,r,c.self,v),k;for(n=h.length-1;n>=z;n--)i=h[n],i.self.onExit&&s.invoke(i.self.onExit,i.self,i.locals.globals),i.locals=null;for(n=z;n<j.length;n++)o=j[n],o.locals=V[n],o.self.onEnter&&s.invoke(o.self.onEnter,o.self,o.locals.globals);return E.transition!==N?(e.$broadcast("$stateChangeCancel",t.self,r,c.self,v),k):(E.$current=t,E.current=t.self,E.params=r,K(E.params,f),E.transition=null,a.location&&t.navigable&&p.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===a.location}),a.notify&&e.$broadcast("$stateChangeSuccess",t.self,r,c.self,v),p.update(!0),E.current)}).then(null,function(n){return n===S?k:E.transition!==N?(e.$broadcast("$stateChangeCancel",t.self,r,c.self,v),k):(E.transition=null,i=e.$broadcast("$stateChangeError",t.self,r,c.self,v,n),i.defaultPrevented||p.update(),o.reject(n))});return m(N),N},E.is=function(e,t,n){n=G({relative:E.$current},n||{});var o=d(e,n.relative);return D(o)?E.$current===o&&(!t||i(t).reduce(function(e,r){var n=o.params[r];return e&&!n||n.type.equals(f[r],t[r])},!0)):r},E.includes=function(e,t,n){if(n=G({relative:E.$current},n||{}),_(e)&&g(e)){if(!y(e))return!1;e=E.$current.name}var o=d(e,n.relative);if(!D(o))return r;if(!D(E.$current.includes[o.name]))return!1;if(!t)return!0;for(var a=i(t),s=0;s<a.length;s++){var u=a[s],c=o.params[u];if(c&&!c.type.equals(f[u],t[u]))return!1}return i(t).reduce(function(e,r){var n=o.params[r];return e&&!n||n.type.equals(f[r],t[r])},!0)},E.href=function(e,t,n){n=G({lossy:!0,inherit:!0,absolute:!1,relative:E.$current},n||{});var o=d(e,n.relative);if(!D(o))return null;n.inherit&&(t=u(f,t||{},E.$current,o));var a=o&&n.lossy?o.navigable:o;return a&&a.url!==r&&null!==a.url?p.href(a.url,l(o.params.$$keys().concat("#"),t||{}),{absolute:n.absolute}):null},E.get=function(e,t){if(0===arguments.length)return v(i(q),function(e){return q[e].self});var r=d(e,t||E.$current);return r&&r.self?r.self:null},E}function C(e,t,r,n,o,a){function i(e,t,r){function n(t){return"search"!=e.params[t].location}var o=e.params.$$keys().filter(n),a=f.apply({},[e.params].concat(o)),i=new Y.ParamSet(a);return i.$$equals(t,r)}if(!a.reload&&e===r&&(o===r.locals||e.self.reloadOnSearch===!1&&i(r,n,t)))return!0}var x,E,q={},k={},P="abstract",M={parent:function(e){if(D(e.parent)&&e.parent)return d(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?d(t[1]):x},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=n(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,r={params:e.params||{}};if(_(t))return"^"==t.charAt(0)?o.compile(t.substring(1),r):(e.parent.navigable||x).url.concat(t,r);if(!t||o.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new Y.ParamSet;return B(e.params||{},function(e,r){t[r]||(t[r]=new Y.Param(r,null,e,"config"))}),t},params:function(e){var t=f(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?G(e.parent.params.$$new(),t):new Y.ParamSet},views:function(e){var t={};return B(D(e.views)?e.views:{"":e},function(r,n){n.indexOf("@")<0&&(n+="@"+e.parent.name),r.resolveAs=r.resolveAs||e.resolveAs||"$resolve",t[n]=r}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?G({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};x=$({name:"",url:"^",views:null,abstract:!0}),x.navigable=null,this.decorator=w,this.state=b,this.$get=S,S.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function x(){function e(e,t){return{load:function(e,r){var n,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=G(o,r),r.view&&(n=t.fromConfig(r.view,r.params,r.locals)),n}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function E(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,r){return e?t:function(e){return r(function(){e[0].scrollIntoView()},0,!1)}}]}function q(e,r,n,o,a){function i(){return r.has?function(e){return r.has(e)?r.get(e):null}:function(e){try{return r.get(e)}catch(e){return null}}}function s(e,r){var n=function(){return{enter:function(e,t,r){t.after(e),r()},leave:function(e,t){e.remove(),t()}}};if(l)return{enter:function(e,r,n){t.version.minor>2?l.enter(e,null,r).then(n):l.enter(e,null,r,n)},leave:function(e,r){t.version.minor>2?l.leave(e).then(r):l.leave(e,r)}};if(c){var o=c&&c(r,e);return{enter:function(e,t,r){o.enter(e,null,t),r()},leave:function(e,t){o.leave(e),t()}}}return n()}var u=i(),c=u("$animator"),l=u("$animate"),f={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,i,u){return function(r,i,c){function l(){if(d&&(d.remove(),d=null),v&&(v.$destroy(),v=null),p){var e=p.data("$uiViewAnim");g.leave(p,function(){e.$$animLeave.resolve(),d=null}),d=p,p=null}}function f(s){var f,d=P(r,c,i,o),y=d&&e.$current&&e.$current.locals[d];if(s||y!==m){f=r.$new(),m=e.$current.locals[d],f.$emit("$viewContentLoading",d);var w=u(f,function(e){var o=a.defer(),s=a.defer(),u={$animEnter:o.promise,$animLeave:s.promise,$$animLeave:s};e.data("$uiViewAnim",u),g.enter(e,i,function(){o.resolve(),v&&v.$emit("$viewContentAnimationEnded"),(t.isDefined($)&&!$||r.$eval($))&&n(e)}),l()});p=w,v=f,v.$emit("$viewContentLoaded",d),v.$eval(h)}}var d,p,v,m,h=c.onload||"",$=c.autoscroll,g=s(c,r);i.inheritedData("$uiView"),r.$on("$stateChangeSuccess",function(){f(!1)}),f(!0)}}};return f}function k(e,r,n,o){return{restrict:"ECA",priority:-400,compile:function(a){var i=a.html();return a.empty?a.empty():a[0].innerHTML=null,function(a,s,u){var c=n.$current,l=P(a,u,s,o),f=c&&c.locals[l];if(!f)return s.html(i),void e(s.contents())(a);s.data("$uiView",{name:l,state:f.$$state}),s.html(f.$template?f.$template:i);var d=t.extend({},f);a[f.$$resolveAs]=d;var p=e(s.contents());if(f.$$controller){f.$scope=a,f.$element=s;var v=r(f.$$controller,f);f.$$controllerAs&&(a[f.$$controllerAs]=v,a[f.$$controllerAs][f.$$resolveAs]=d),N(v.$onInit)&&v.$onInit(),s.data("$ngControllerController",v),s.children().data("$ngControllerController",v)}p(a)}}}}function P(e,t,r,n){var o=n(t.uiView||t.name||"")(e),a=r.inheritedData("$uiView");return o.indexOf("@")>=0?o:o+"@"+(a?a.state.name:"")}function M(e,t){var r,n=e.match(/^\s*({[^}]*})\s*$/);if(n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function j(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function A(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),r="FORM"===e[0].nodeName;return{attr:r?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!r}}function z(e,t,r,n,o){return function(a){var i=a.which||a.button,s=o();if(!(i>1||a.ctrlKey||a.metaKey||a.shiftKey||e.attr("target"))){var u=r(function(){t.go(s.state,s.params,s.options)});a.preventDefault();var c=n.isAnchor&&!s.href?1:0;a.preventDefault=function(){c--<=0&&r.cancel(u)}}}}function I(e,t){return{relative:j(e)||t.$current,inherit:!0}}function F(e,r){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,o,a,i){var s,u=M(a.uiSref,e.current.name),c={state:u.state,href:null,params:null},l=A(o),f=i[1]||i[0],d=null;c.options=G(I(o,e),a.uiSrefOpts?n.$eval(a.uiSrefOpts):{});var p=function(r){r&&(c.params=t.copy(r)),c.href=e.href(u.state,c.params,c.options),d&&d(),f&&(d=f.$$addStateInfo(u.state,c.params)),null!==c.href&&a.$set(l.attr,c.href)};u.paramExpr&&(n.$watch(u.paramExpr,function(e){e!==c.params&&p(e)},!0),c.params=t.copy(n.$eval(u.paramExpr))),p(),l.clickable&&(s=z(o,e,r,l,function(){return c}),o[o.on?"on":"bind"]("click",s),n.$on("$destroy",function(){o[o.off?"off":"unbind"]("click",s)}))}}}function V(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,n,o,a){function i(t){d.state=t[0],d.params=t[1],d.options=t[2],d.href=e.href(d.state,d.params,d.options),p&&p(),c&&(p=c.$$addStateInfo(d.state,d.params)),d.href&&o.$set(u.attr,d.href)}var s,u=A(n),c=a[1]||a[0],l=[o.uiState,o.uiStateParams||null,o.uiStateOpts||null],f="["+l.map(function(e){return e||"null"}).join(", ")+"]",d={state:null,params:null,options:null,href:null},p=null;r.$watch(f,i,!0),i(r.$eval(f)),u.clickable&&(s=z(n,e,t,u,function(){return d}),n[n.on?"on":"bind"]("click",s),r.$on("$destroy",function(){n[n.off?"off":"unbind"]("click",s)}))}}}function O(e,t,r){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,n,o,a){function i(t,r,o){var a=e.get(t,j(n)),i=s(t,r),u={state:a||{name:t},params:r,hash:i};return m.push(u),h[i]=o,function(){var e=m.indexOf(u);e!==-1&&m.splice(e,1)}}function s(e,r){if(!_(e))throw new Error("state should be a string");return R(r)?e+J(r):(r=t.$eval(r),R(r)?e+J(r):e)}function u(){for(var e=0;e<m.length;e++)f(m[e].state,m[e].params)?c(n,h[m[e].hash]):l(n,h[m[e].hash]),d(m[e].state,m[e].params)?c(n,p):l(n,p)}function c(e,t){a(function(){e.addClass(t)})}function l(e,t){e.removeClass(t)}function f(t,r){return e.includes(t.name,r)}function d(t,r){return e.is(t.name,r)}var p,v,m=[],h={};p=r(o.uiSrefActiveEq||"",!1)(t);try{v=t.$eval(o.uiSrefActive)}catch(e){}v=v||r(o.uiSrefActive||"",!1)(t),R(v)&&B(v,function(r,n){if(_(r)){var o=M(r,e.current.name);i(o.state,t.$eval(o.paramExpr),n)}}),this.$$addStateInfo=function(e,t){if(!(R(v)&&m.length>0)){var r=i(e,t,v);return u(),r}},t.$on("$stateChangeSuccess",u),u()}]}}function U(e){var t=function(t,r){return e.is(t,r)};return t.$stateful=!0,t}function T(e){var t=function(t,r,n){return e.includes(t,r,n)};return t.$stateful=!0,t}var D=t.isDefined,N=t.isFunction,_=t.isString,R=t.isObject,L=t.isArray,B=t.forEach,G=t.extend,K=t.copy,J=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),h.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",h),t.module("ui.router.util").provider("$templateFactory",$);var Y;y.prototype.concat=function(e,t){var r={caseInsensitive:Y.caseInsensitive(),strict:Y.strictMode(),squash:Y.defaultSquashPolicy()};return new y(this.sourcePath+e+this.sourceSearch,G(r,t),this)},y.prototype.toString=function(){return this.source},y.prototype.exec=function(e,t){function r(e){function t(e){return e.split("").reverse().join("")}function r(e){return e.replace(/\\-/g,"-")}var n=t(e).split(/-(?!\\)/),o=v(n,t);return v(o,r).reverse()}var n=this.regexp.exec(e);if(!n)return null;t=t||{};var o,a,i,s=this.parameters(),u=s.length,c=this.segments.length-1,l={};if(c!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var f,d;for(o=0;o<c;o++){for(i=s[o],f=this.params[i],d=n[o+1],a=0;a<f.replace.length;a++)f.replace[a].from===d&&(d=f.replace[a].to);d&&f.array===!0&&(d=r(d)),D(d)&&(d=f.type.decode(d)),l[i]=f.value(d)}for(;o<u;o++){for(i=s[o],l[i]=this.params[i].value(t[i]),f=this.params[i],d=t[i],a=0;a<f.replace.length;a++)f.replace[a].from===d&&(d=f.replace[a].to);D(d)&&(d=f.type.decode(d)),l[i]=f.value(d)}return l},y.prototype.parameters=function(e){return D(e)?this.params[e]||null:this.$$paramNames},y.prototype.validates=function(e){return this.params.$$validates(e)},y.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var r=this.segments,n=this.parameters(),o=this.params;if(!this.validates(e))return null;var a,i=!1,s=r.length-1,u=n.length,c=r[0];for(a=0;a<u;a++){var l=a<s,f=n[a],d=o[f],p=d.value(e[f]),m=d.isOptional&&d.type.equals(d.value(),p),h=!!m&&d.squash,$=d.type.encode(p);if(l){var g=r[a+1],y=a+1===s;if(h===!1)null!=$&&(c+=L($)?v($,t).join("-"):encodeURIComponent($)),c+=g;else if(h===!0){var w=c.match(/\/$/)?/\/?(.*)/:/(.*)/;c+=g.match(w)[1]}else _(h)&&(c+=h+g);y&&d.squash===!0&&"/"===c.slice(-1)&&(c=c.slice(0,-1))}else{if(null==$||m&&h!==!1)continue;if(L($)||($=[$]),0===$.length)continue;$=v($,encodeURIComponent).join("&"+f+"="),c+=(i?"&":"?")+(f+"="+$),i=!0}}return c},w.prototype.is=function(e,t){return!0},w.prototype.encode=function(e,t){return e},w.prototype.decode=function(e,t){return e},w.prototype.equals=function(e,t){return e==t},w.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},w.prototype.pattern=/.*/,w.prototype.toString=function(){return"{Type:"+this.name+"}"},w.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},w.prototype.$asArray=function(e,t){function n(e,t){function n(e,t){return function(){return e[t].apply(e,arguments)}}function o(e){return L(e)?e:D(e)?[e]:[]}function a(e){switch(e.length){case 0:return r;case 1:return"auto"===t?e[0]:e;default:return e}}function i(e){return!e}function s(e,t){return function(r){if(L(r)&&0===r.length)return r;r=o(r);var n=v(r,e);return t===!0?0===p(n,i).length:a(n)}}function u(e){return function(t,r){var n=o(t),a=o(r);if(n.length!==a.length)return!1;
for(var i=0;i<n.length;i++)if(!e(n[i],a[i]))return!1;return!0}}this.encode=s(n(e,"encode")),this.decode=s(n(e,"decode")),this.is=s(n(e,"is"),!0),this.equals=u(n(e,"equals")),this.pattern=e.pattern,this.$normalize=s(n(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new n(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",b),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),S.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",S),C.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",C).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),x.$inject=[],t.module("ui.router.state").provider("$view",x),t.module("ui.router.state").provider("$uiViewScroll",E),q.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],k.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",q),t.module("ui.router.state").directive("uiView",k),F.$inject=["$state","$timeout"],V.$inject=["$state","$timeout"],O.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",F).directive("uiSrefActive",O).directive("uiSrefActiveEq",O).directive("uiState",V),U.$inject=["$state"],T.$inject=["$state"],t.module("ui.router.state").filter("isState",U).filter("includedByState",T)}(window,window.angular),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery||window.Zepto)}(function(e){var t=function(t,r,n){var o,a,i=this;t=e(t),r="function"==typeof r?r(t.val(),void 0,t,n):r;var s={getCaret:function(){try{var e,r=0,n=t.get(0),o=document.selection,a=n.selectionStart;return o&&!~navigator.appVersion.indexOf("MSIE 10")?(e=o.createRange(),e.moveStart("character",t.is("input")?-t.val().length:-t.text().length),r=e.text.length):(a||"0"===a)&&(r=a),r}catch(e){}},setCaret:function(e){try{if(t.is(":focus")){var r,n=t.get(0);n.setSelectionRange?n.setSelectionRange(e,e):n.createTextRange&&(r=n.createTextRange(),r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select())}}catch(e){}},events:function(){t.on("keydown.mask",function(){o=s.val()}).on("keyup.mask",s.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){o===t.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("focusout.mask",function(){n.clearIfNotMatch&&!a.test(s.val())&&s.val("")})},getRegexMask:function(){for(var e,t,n,o,a=[],s=0;s<r.length;s++)(e=i.translation[r[s]])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=e.optional,(e=e.recursive)?(a.push(r[s]),o={digit:r[s],pattern:t}):a.push(n||e?t+"?":t)):a.push(r[s].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=a.join(""),o&&(a=a.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(a)},destroyEvents:function(){t.off("keydown keyup paste drop change blur focusout DOMNodeInserted ".split(" ").join(".mask ")).removeData("changeCalled")},val:function(e){var r=t.is("input");return 0<arguments.length?r?t.val(e):t.text(e):r?t.val():t.text()},getMCharsBeforeCount:function(e,t){for(var n=0,o=0,a=r.length;o<a&&o<e;o++)i.translation[r.charAt(o)]||(e=t?e+1:e,n++);return n},caretPos:function(e,t,n,o){return i.translation[r.charAt(Math.min(e-1,r.length-1))]?Math.min(e+n-t-o,n):s.caretPos(e+1,t,n,o)},behaviour:function(t){t=t||window.event;var r=t.keyCode||t.which;if(-1===e.inArray(r,i.byPassKeys)){var n=s.getCaret(),o=s.val(),a=o.length,u=n<a,c=s.getMasked(),l=c.length,f=s.getMCharsBeforeCount(l-1)-s.getMCharsBeforeCount(a-1);return c!==o&&s.val(c),!u||65===r&&t.ctrlKey||(8!==r&&46!==r&&(n=s.caretPos(n,a,l,f)),s.setCaret(n)),s.callbacks(t)}},getMasked:function(e){var t,o,a=[],u=s.val(),c=0,l=r.length,f=0,d=u.length,p=1,v="push",m=-1;for(n.reverse?(v="unshift",p=-1,t=0,c=l-1,f=d-1,o=function(){return-1<c&&-1<f}):(t=l-1,o=function(){return c<l&&f<d});o();){var h=r.charAt(c),$=u.charAt(f),g=i.translation[h];g?($.match(g.pattern)?(a[v]($),g.recursive&&(-1===m?m=c:c===t&&(c=m-p),t===m&&(c-=p)),c+=p):g.optional&&(c+=p,f-=p),f+=p):(e||a[v](h),$===h&&(f+=p),c+=p)}return e=r.charAt(t),l!==d+1||i.translation[e]||a.push(e),a.join("")},callbacks:function(e){var a=s.val(),i=a!==o;!0===i&&"function"==typeof n.onChange&&n.onChange(a,e,t,n),!0===i&&"function"==typeof n.onKeyPress&&n.onKeyPress(a,e,t,n),"function"==typeof n.onComplete&&a.length===r.length&&n.onComplete(a,e,t,n)}};i.mask=r,i.options=n,i.remove=function(){var e;return s.destroyEvents(),s.val(i.getCleanVal()).removeAttr("maxlength"),e=s.getCaret(),s.setCaret(e-s.getMCharsBeforeCount(e)),t},i.getCleanVal=function(){return s.getMasked(!0)},i.init=function(){n=n||{},i.byPassKeys=[9,16,17,18,36,37,38,39,40,91],i.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},i.translation=e.extend({},i.translation,n.translation),i=e.extend(!0,{},i,n),a=s.getRegexMask(),!1!==n.maxlength&&t.attr("maxlength",r.length),n.placeholder&&t.attr("placeholder",n.placeholder),t.attr("autocomplete","off"),s.destroyEvents(),s.events();var o=s.getCaret();s.val(s.getMasked()),s.setCaret(o+s.getMCharsBeforeCount(o,!0))}()},r={},n=function(){var t=e(this),r={};t.attr("data-mask-reverse")&&(r.reverse=!0),"false"===t.attr("data-mask-maxlength")&&(r.maxlength=!1),t.attr("data-mask-clearifnotmatch")&&(r.clearIfNotMatch=!0),t.mask(t.attr("data-mask"),r)};e.fn.mask=function(n,o){var a=this.selector,i=function(){var r=e(this).data("mask"),a=JSON.stringify;if("object"!=typeof r||a(r.options)!==a(o)||r.mask!==n)return e(this).data("mask",new t(this,n,o))};this.each(i),a&&!r[a]&&(r[a]=!0,setTimeout(function(){e(document).on("DOMNodeInserted.mask",a,i)},500))},e.fn.unmask=function(){try{return this.each(function(){e(this).data("mask").remove().removeData("mask")})}catch(e){}},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e("*[data-mask]").each(n),e(document).on("DOMNodeInserted.mask","*[data-mask]",n)}),!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):e.hasOwnProperty("angular")?t(e.angular):"object"==typeof exports&&(module.exports=t(require("angular")))}(this,function(e){"use strict";function t(e,t){var r;try{r=e[t]}catch(e){r=!1}if(r){var n="__"+Math.round(1e7*Math.random());try{e[t].setItem(n,n),e[t].removeItem(n,n)}catch(e){r=!1}}return r}function r(r){var n=t(window,r);return function(){var o="ngStorage-";this.setKeyPrefix=function(e){if("string"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setKeyPrefix() expects a String.");o=e};var a=e.toJson,i=e.fromJson;this.setSerializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setSerializer expects a function.");a=e},this.setDeserializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setDeserializer expects a function.");i=e},this.supported=function(){return!!n},this.get=function(e){return n&&i(n.getItem(o+e))},this.set=function(e,t){return n&&n.setItem(o+e,a(t))},this.remove=function(e){n&&n.removeItem(o+e)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(n,s,u,c,l){var f,d,p=o.length,v=t(s,r),m=v||(u.warn("This browser does not support Web Storage!"),{setItem:e.noop,getItem:e.noop,removeItem:e.noop}),h={$default:function(t){for(var r in t)e.isDefined(h[r])||(h[r]=e.copy(t[r]));return h.$sync(),h},$reset:function(e){for(var t in h)"$"===t[0]||delete h[t]&&m.removeItem(o+t);return h.$default(e)},$sync:function(){for(var e,t=0,r=m.length;r>t;t++)(e=m.key(t))&&o===e.slice(0,p)&&(h[e.slice(p)]=i(m.getItem(e)))},$apply:function(){var t;if(d=null,!e.equals(h,f)){t=e.copy(f),e.forEach(h,function(r,n){e.isDefined(r)&&"$"!==n[0]&&(m.setItem(o+n,a(r)),delete t[n])});for(var r in t)m.removeItem(o+r);f=e.copy(h)}},$supported:function(){return!!v}};return h.$sync(),f=e.copy(h),n.$watch(function(){d||(d=c(h.$apply,100,!1))}),s.addEventListener&&s.addEventListener("storage",function(t){if(t.key){var r=l[0];r.hasFocus&&r.hasFocus()||o!==t.key.slice(0,p)||(t.newValue?h[t.key.slice(p)]=i(t.newValue):delete h[t.key.slice(p)],f=e.copy(h),n.$apply())}}),s.addEventListener&&s.addEventListener("beforeunload",function(){h.$apply()}),h}]}}return e=e&&e.module?e:window.angular,e.module("ngStorage",[]).provider("$localStorage",r("localStorage")).provider("$sessionStorage",r("sessionStorage"))}),angular.module("ambaya",["ui.router","ngStorage"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("inicio");var r={name:"Início",url:"/inicio",views:{Consultor:{templateUrl:"views/consultor/inicio.html",controller:"ConsultorInicioController"},Supervisor:{templateUrl:"views/supervisor/inicio.html",controller:"SupervisorInicioController"},Controladoria:{templateUrl:"views/controladoria/inicio.html",controller:"ControladoriaInicioController"},Estoque:{templateUrl:"views/estoque/inicio.html",controller:"EstoqueInicioController"},Login:{templateUrl:"login.html"}}},n={name:"Consultores",url:"/consultores",views:{Supervisor:{templateUrl:"views/supervisor/consultores.html",controller:"ConsultoresSupervisorController"},Controladoria:{templateUrl:"views/controladoria/consultores.html",controller:"ConsultoresControladoriaController"},Login:{templateUrl:"login.html"}}},o={name:"Consultor",url:"/consultor/{consultorId}",views:{Supervisor:{templateUrl:"views/supervisor/consultor.html",controller:"ConsultorController"},Controladoria:{templateUrl:"views/controladoria/consultor.html",controller:"ConsultorController"},Login:{templateUrl:"login.html"}}},a={name:"Supervisores",url:"/supervisores",views:{Controladoria:{templateUrl:"views/controladoria/supervisores.html",controller:"SupervisoresController"},Login:{templateUrl:"login.html"}}},i={name:"Supervisor",url:"/supervisor/{supervisorId}",controller:"",views:{Controladoria:{templateUrl:"views/controladoria/supervisor.html",controller:"SupervisorController"},Login:{templateUrl:"login.html"}}},s={name:"Acertos",url:"/acertos",controller:"",views:{Supervisor:{templateUrl:"views/supervisor/acertos.html"},Login:{templateUrl:"login.html"}}},u={name:"Estoque",url:"/estoque",controller:"",views:{Supervisor:{templateUrl:"views/supervisor/estoque.html",controller:"EstoqueSupervisorController"},Consultor:{templateUrl:"views/consultor/estoque.html",controller:"EstoqueConsultorController"},Login:{templateUrl:"login.html"}}},c={name:"Encomendas",url:"/encomendas",controller:"",views:{Supervisor:{templateUrl:"views/supervisor/encomendas.html",controller:"EncomendasSupervisorController"},Estoque:{templateUrl:"views/estoque/encomendas.html",controller:"EncomendasEstoqueController"},Controladoria:{templateUrl:"views/controladoria/encomendas.html",controller:"EncomendasControladoriaController"},Login:{templateUrl:"login.html"}}},l={name:"Relatórios",url:"/relatorios",controller:"",views:{Controladoria:{templateUrl:"views/controladoria/relatorios.html"},Login:{templateUrl:"login.html"}}};e.state(r),e.state(n),e.state(o),e.state(a),e.state(i),e.state(s),e.state(u),e.state(c),e.state(l)}]),angular.module("ambaya").controller("BaseController",["loginService","$scope","$state","$localStorage",function(e,t,r,n){$(".button-collapse").sideNav({closeOnClick:!0,draggable:!0}),t.usuario={username:"",password:""};var o={Consultor:[{nome:"Início",icone:"home"},{nome:"Estoque",icone:"business_center"}],Supervisor:[{nome:"Início",icone:"home"},{nome:"Consultores",icone:"people"},{nome:"Estoque",icone:"business_center"},{nome:"Encomendas",icone:"loop"}],Controladoria:[{nome:"Início",icone:"home"},{nome:"Consultores",icone:"people"},{nome:"Supervisores",icone:"people"},{nome:"Encomendas",icone:"loop"}],Estoque:[{nome:"Início",icone:"home"},{nome:"Encomendas",icone:"loop"}]};t.login=function(){e.login(t.usuario).then(function(e){n.usuario=e.data.user,n.token=e.data.token,n.logado=!0,t.usuario=e.data.user,t.rotas=o[t.usuario.tipo],t.tipo=t.usuario.tipo,t.logado=!0,r.reload()},function(e){Materialize.toast("Login inválido",3e3)})},t.sair=function(){e.logout(),t.logado=!1,t.tipo="Login",r.is("Início")?r.reload():r.go("Início")},t.logado=e.check(),t.logado?(t.usuario=e.getUser(),t.rotas=o[t.usuario.tipo],t.tipo=t.usuario.tipo):t.tipo="Login",t.$state=r,t.faltamDias=function(e){return e=new Date(e),Math.floor((e-Date.now())/864e5)},t.deletaElemento=function(e,t){e.splice(t,1)},t.processaPecas=function(e){var t={aneis:[],brincosP:[],brincosG:[],cordoesF:[],cordoesM:[],pingentes:[],pulseirasF:[],pulseirasM:[],tornozeleiras:[],escapularios:[],totais:{aneis:0,brincosP:0,brincosG:0,cordoesF:0,cordoesM:0,pingentes:0,pulseirasF:0,pulseirasM:0,tornozeleiras:0,escapularios:0}},r=0,n=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0;for(i=0;i<e.length;i++){switch(tipo=e[i].substr(0,2),valor=e[i].substr(6,2),tipo){case"AN":tipo="aneis",r++;break;case"BP":tipo="brincosP",n++;break;case"BG":tipo="brincosG",o++;break;case"CF":tipo="cordoesF",a++;break;case"CM":tipo="cordoesM",s++;break;case"PN":tipo="pingentes",u++;break;case"PF":tipo="pulseirasF",c++;break;case"PM":tipo="pulseirasM",l++;break;case"TZ":tipo="tornozeleiras",f++;break;case"ES":tipo="escapularios",d++}0!=t[tipo].length?$.grep(t[tipo],function(e){e.val==valor?(e.tot++,existe=!0):existe=!1}):existe=!1,existe||t[tipo].push({val:valor,tot:1})}return t.totais={aneis:r,brincosP:n,brincosG:o,cordoesF:a,cordoesM:s,pingentes:u,pulseirasF:c,pulseirasM:l,tornozeleiras:f,escapularios:d},t},t.voltaPecas=function(e){var t=[];for(i=0;i<e.aneis.length;i++)for(peca="ANxxxx"+e.aneis[i].val,j=0;j<e.aneis[i].tot;j++)t.push(peca);for(i=0;i<e.brincosP.length;i++)for(peca="BPxxxx"+e.brincosP[i].val,j=0;j<e.brincosP[i].tot;j++)t.push(peca);for(i=0;i<e.brincosG.length;i++)for(peca="BGxxxx"+e.brincosG[i].val,j=0;j<e.brincosG[i].tot;j++)t.push(peca);for(i=0;i<e.cordoesF.length;i++)for(peca="CFxxxx"+e.cordoesF[i].val,j=0;j<e.cordoesF[i].tot;j++)t.push(peca);for(i=0;i<e.cordoesM.length;i++)for(peca="CMxxxx"+e.cordoesM[i].val,j=0;j<e.cordoesM[i].tot;j++)t.push(peca);for(i=0;i<e.pingentes.length;i++)for(peca="PNxxxx"+e.pingentes[i].val,j=0;j<e.pingentes[i].tot;j++)t.push(peca);for(i=0;i<e.pulseirasF.length;i++)for(peca="PFxxxx"+e.pulseirasF[i].val,j=0;j<e.pulseirasF[i].tot;j++)t.push(peca);for(i=0;i<e.pulseirasM.length;i++)for(peca="PMxxxx"+e.pulseirasM[i].val,j=0;j<e.pulseirasM[i].tot;j++)t.push(peca);for(i=0;i<e.tornozeleiras.length;i++)for(peca="TZxxxx"+e.tornozeleiras[i].val,j=0;j<e.tornozeleiras[i].tot;j++)t.push(peca);for(i=0;i<e.escapularios.length;i++)for(peca="ESxxxx"+e.escapularios[i].val,j=0;j<e.escapularios[i].tot;j++)t.push(peca);return t},t.extraiPreco=function(e){return e.substr(6,2)},t.extraiCod=function(e){return e.substr(0,2)}}]).controller("ControladoriaInicioController",["$scope","controladoriaService",function(e,t){$(".tooltipped").tooltip({delay:50}),t.consultores().then(function(t){e.consultores=t.data},function(e){}),t.supervisores().then(function(t){e.supervisores=t.data},function(e){})}]).controller("ConsultoresControladoriaController",["$scope","consultoresService",function(e,t){$(".tooltipped").tooltip({delay:50}),t.todos().then(function(t){e.consultores=t.data,e.total=e.consultores.length},function(e){Materialize.toast("Falha ao carregar Consultores",5e3)})}]).controller("SupervisoresController",["$scope","supervisoresService","userService",function(e,t,r){$(".cep").mask("00000-000"),$(".cpf").mask("000.000.000-00",{reverse:!0});var n=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},o={onKeyPress:function(e,t,r,o){r.mask(n.apply({},arguments),o)}};$(".telefone").mask(n,o),$(".tooltipped").tooltip({delay:50}),$("select").material_select(),$(".datepicker").pickadate({selectMonths:!0,selectYears:150}),carregaSupervisores=function(){t.todos().then(function(t){e.supervisores=t.data,e.total=e.supervisores.length},function(e){Materialize.toast("Falha ao carregar supervisores!",5e3)})},carregaSupervisores(),e.form={nome:"",sobrenome:"",tipo:"Supervisor",status:"Aprovado",porcentagem:10,estoque:[],vendido:[],investidor:!1,totalVendido:0,proxAcerto:Date.now()+3888e6},$("#adicionar").modal(),e.add=function(){$("#adicionar").modal("open")},e.novo=function(){Date.now()+3888e6;e.form.username=e.form.nome.toLowerCase()+"."+e.form.sobrenome.toLowerCase().replace(" ","."),e.form.password=e.form.username,r.novo(e.form).then(function(t){$("#adicionar").modal("close"),e.form={nome:"",sobrenome:"",tipo:"Supervisor",status:"Aprovado",porcentagem:10,estoque:[],vendido:[],investidor:!1,totalVendido:0,proxAcerto:Date.now()+3888e6},Materialize.toast("Supervisor adicionado com sucesso!",5e3),carregaSupervisores()},function(e){Materialize.toast(e.err.message,5e3)})}}]).controller("SupervisorController",["$scope","supervisoresService","userService","consultoresService","$stateParams",function(e,t,r,n,o){$(".cep").mask("00000-000"),$(".cpf").mask("000.000.000-00",{reverse:!0});var a=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},i={onKeyPress:function(e,t,r,n){r.mask(a.apply({},arguments),n)}};$(".telefone").mask(a,i),$(".tooltipped").tooltip({delay:50}),$("select").material_select(),$(".datepicker").pickadate({selectMonths:!0,selectYears:150});var s=o.supervisorId;r.carregaUm(s).then(function(t){e.supervisor=t.data,e.pecas=e.processaPecas(e.supervisor.estoque)},function(e){Materialize.toast("Falha ao carregar dados",5e3)});var u=function(){n.porSupervisor(s).then(function(t){e.consultores=t.data},function(e){Materialize.toast("Falha ao carregar dados",5e3)})};u(),e.form={nome:"",sobrenome:"",tipo:"Consultor",status:"Aprovado",supervisor:s,porcentagem:30,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},$("#adicionar").modal(),$("#excluir").modal(),e.add=function(){$("#adicionar").modal("open")},e.del=function(){$("#excluir").modal("open")},e.novo=function(){console.log(e.form),e.form.username=e.form.cpf.replace(".","").replace(".","").replace("-",""),e.form.password=e.form.username,r.novo(e.form).then(function(t){$("#adicionar").modal("close"),e.form={nome:"",sobrenome:"",tipo:"Consultor",status:"Aprovado",supervisor:s,porcentagem:30,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},u(),Materialize.toast("Consultor adicionado com sucesso!",5e3)},function(e){Materialize.toast("response.err.message",5e3)})},e.excluir=function(){r.deletaUm(e.supervisor._id).then(function(e){Materialize.toast("Excluido com sucesso!",5e3),window.history.back()},function(e){Materialize.toast("Falha ao excluir",5e3)})}}]).controller("ConsultorController",["$scope","userService","consultoresService","estoqueService","$stateParams",function(e,t,r,n,o){$(".tooltipped").tooltip({delay:50}),$("select").material_select();var a=o.consultorId;t.carregaUm(a).then(function(t){e.consultor=t.data,e.pecas=e.processaPecas(e.consultor.estoque),e.vendidas=e.processaPecas(e.consultor.vendido)},function(e){Materialize.toast("Falha ao carregar dados!",3e3)}),$("#excluir").modal(),e.del=function(){$("#excluir").modal("open")},e.excluir=function(){t.deletaUm(e.consultor._id).then(function(e){Materialize.toast("Excluído com sucesso",5e3),window.history.back()},function(e){Materialize.toast("Falha ao excluir",5e3)})},e.aprovar=function(){r.aprovar(a).then(function(t){e.consultor.status="Aprovado"},function(e){Materialize.toast("Falha ao atualizar",5e3)})},e.desaprovar=function(){r.desaprovar(a).then(function(t){e.consultor.status="Inativo"},function(e){Materialize.toast("Falha ao atualizar",5e3)})},e.codigo="AN",$("#enviar").modal(),e.modalEncomenda=function(){e.estoqueTemp=[],e.estoqueTemp=e.estoqueTemp.concat(e.usuario.estoque),console.log(e.usuario.estoque),e.pecasEnviadas=[],$("#enviar").modal("open")},e.enviar=function(){n.atualizaEstoque(e.usuario._id,e.estoqueTemp).then(function(t){n.entradaEstoque(e.consultor._id,e.pecasEnviadas).then(function(t){e.consultor.estoque=e.consultor.estoque.concat(e.pecasEnviadas),e.pecas=e.processaPecas(e.consultor.estoque),Materialize.toast("Peças Alocadas",5e3)},function(e){Materialize.toast(e.err.message,5e3)})},function(e){Materialize.toast(e.err.message,5e3)}),e.usuario.estoque=[],e.usuario.estoque=e.usuario.estoque.concat(e.estoqueTemp),$("#enviar").modal("close")},e.enviado=function(t){indice=e.estoqueTemp.indexOf(t),cod=e.estoqueTemp[indice],e.deletaElemento(e.estoqueTemp,indice),e.pecasEnviadas.push(cod)},e.devolvido=function(t){indice=e.pecasEnviadas.indexOf(t),cod=e.pecasEnviadas[indice],e.deletaElemento(e.pecasEnviadas,indice),e.estoqueTemp.push(cod)},e.porItem=function(t){var r=t.substr(0,2);return e.codigo===r},$("#item").on("change",function(){e.codigo=$(this).val()})}]).controller("EncomendasControladoriaController",["$scope","encomendasService","consultoresService",function(e,t,r){$(".tooltipped").tooltip({delay:50}),$(document).ready(function(){$("ul.tabs").tabs()}),e.status=["Pendente"],e.filtroStatus=function(t){return e.status.indexOf(t.status)!==-1},e.encomendas={},carregaEncomendas=function(){t.todas().then(function(t){e.encomendas=t.data},function(e){Materialize.toas("Falha ao cerregar dados!",5e3)})},carregaEncomendas(),e.aprovar=function(e){t.atualizarStatus(e,"Aprovada").then(function(e){carregaEncomendas()},function(e){Materialize.toast(e.err.message,5e3)})},e.cancelar=function(e){t.atualizarStatus(e,"Cancelada").then(function(e){carregaEncomendas()},function(e){Materialize.toast(e.err.message,5e3)})}}]).controller("SupervisorInicioController",["$scope","supervisoresService","consultoresService",function(e,t,r){$(".tooltipped").tooltip({delay:50}),e.consultores={},carregaConsultores=function(){r.porSupervisor(e.usuario._id).then(function(t){e.consultores=t.data;for(var r={total:0,totalVendido:0,valorVendido:0,totalPecas:0,totalGanho:0},n=0;n<e.consultores.length;n++)r.totalVendido+=e.consultores[n].vendido.length,r.valorVendido+=e.consultores[n].totalVendido,r.totalGanho+=e.consultores[n].totalVendido*e.consultores[n].porcentagem/100,r.totalPecas+=e.consultores[n].estoque.length,r.total++;e.consultores=r},function(e){Materialize.toast("Falha ao carregar consultores",5e3)})},carregaConsultores()}]).controller("ConsultoresSupervisorController",["$scope","consultoresService","userService",function(e,t,r){$(".cep").mask("00000-000"),$(".cpf").mask("000.000.000-00",{reverse:!0});var n=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},o={onKeyPress:function(e,t,r,o){r.mask(n.apply({},arguments),o)}};$(".telefone").mask(n,o),$(".tooltipped").tooltip({delay:50}),$("select").material_select(),$(".datepicker").pickadate({selectMonths:!0,selectYears:150}),carregaConsultores=function(){t.porSupervisor(e.usuario._id).then(function(t){e.consultores=t.data;for(var r={total:0,totalVendido:0,valorVendido:0,totalPecas:0},n=0;n<e.consultores.length;n++)r.totalVendido+=e.consultores[n].vendido.length,r.valorVendido+=e.consultores[n].totalVendido,r.totalPecas+=e.consultores[n].estoque.length;e.valorVendido=r.valorVendido,e.totalPecas=r.totalPecas+r.totalVendido,e.total=e.consultores.length},function(e){Materialize.toast("Falha ao carregar consultores",5e3)})},carregaConsultores(),e.form={nome:"",sobrenome:"",tipo:"Consultor",supervisor:e.usuario._id,porcentagem:30,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},$("#adicionar").modal(),e.add=function(){$("#adicionar").modal("open")},e.novo=function(){console.log(e.form),e.form.username=e.form.cpf.replace(".","").replace(".","").replace("-",""),e.form.password=e.form.username,r.novo(e.form).then(function(t){$("#adicionar").modal("close"),e.form={nome:"",sobrenome:"",tipo:"Consultor",supervisor:e.usuario._id,porcentagem:30,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},Materialize.toast("Consultor adicionado com sucesso!",5e3),carregaConsultores()},function(e){Materialize.toast(e.err.message,5e3)})}}]).controller("EstoqueSupervisorController",["$scope","consultoresService",function(e,t){$(".tooltipped").tooltip({delay:50}),e.geral={},e.pecas=e.processaPecas(e.usuario.estoque)}]).controller("EncomendasSupervisorController",["$scope","encomendasService","consultoresService",function(e,t,r){$(".tooltipped").tooltip({delay:50}),e.form={item:"",quantidade:"",donoNome:e.usuario.nome,donoId:e.usuario._id},$(document).ready(function(){$("ul.tabs").tabs()}),e.status=["Aprovada","Enviada","Pendente","Cancelada"],e.filtroStatus=function(t){return e.status.indexOf(t.status)!==-1},e.encomendas={},carregaEncomendas=function(){console.log("carregando"),t.supervisor(e.usuario._id).then(function(t){e.encomendas=t.data},function(e){Materialize.toas("Falha ao cerregar dados!",5e3)})},carregaEncomendas(),r.porSupervisor(e.usuario._id).then(function(t){e.consultores=t.data},function(e){Materialize.toast("Falha ao carregar consultores",5e3)}),$("#adicionar").modal(),e.add=function(){$("select").material_select(),$("#adicionar").modal("open")},e.novo=function(){t.nova(e.form).then(function(t){Materialize.toast("Encomenda adicionada com sucesso!",5e3),$("#adicionar").modal("close"),e.form={item:"",quantidade:"",donoNome:e.usuario.nome,donoId:e.usuario._id},carregaEncomendas()},function(e){Materialize.toast(e.err.message,5e3)})},e.cancelar=function(e){t.atualizarStatus(e,"Cancelada").then(function(e){carregaEncomendas()},function(e){Materialize.toast(e.err.message,5e3)})}}]).controller("ConsultorInicioController",["$scope","consultoresService","userService",function(e,t,r){$(".tooltipped").tooltip({delay:50}),e.adicionando=[],r.carregaUm(e.usuario.supervisor).then(function(t){e.supervisor=t.data},function(e){Materialize.toast("Falha ao carregar dados do supervisor!",3e3,"white")}),$("#venda").modal(),e.modalVenda=function(){$("#venda").modal("open"),$("#codigo").focus()},e.entrada=function(){e.adicionando.push(e.codigo.toUpperCase()),e.codigo=""},e.vender=function(){for(var r=e.usuario.estoque,n=e.usuario.vendido,o=e.usuario.totalVendido,a=0;a<e.adicionando.length;a++)for(var i=e.extraiPreco(e.adicionando[a]),s=e.extraiCod(e.adicionando[a]),u=0;u<e.usuario.estoque.length;u++)if(i===e.extraiPreco(e.usuario.estoque[u])&&s===e.extraiCod(e.usuario.estoque[u])){e.usuario.vendido.push(e.usuario.estoque[u]),e.deletaElemento(e.usuario.estoque,u),e.usuario.totalVendido+=Number(i),console.log(e.usuario.vendido);break}alert("Cehegue"),t.venda(e.usuario).then(function(e){Materialize.toast("Venda Efetivada",5e3)},function(t){e.usuario.estoque=r,e.usuario.vendido=n,e.usuario.totalVendido=o,Materialize.toast("Falha ao realizar venda!",5e3)}),$("#venda").modal("close"),e.adicionando=[]}}]).controller("EstoqueConsultorController",["$scope","consultoresService",function(e,t){$(".tooltipped").tooltip({delay:50}),e.geral={},e.pecas=e.processaPecas(e.usuario.estoque),e.vendidas=e.processaPecas(e.usuario.vendido)}]).controller("EstoqueInicioController",["$scope","estoqueService","encomendasService",function(e,t,r){$(".tooltipped").tooltip({delay:50}),$("#entrada").modal(),$("select").material_select(),e.adicionando=[],e.encomendas={},e.pecas=e.processaPecas(e.usuario.estoque),r.totalAprovado().then(function(t){e.encomendas=t.data},function(e){Materialize.toast("Falha ao carregar dados",5e3)}),e.codigo="",e.abrir=function(){$("#entrada").modal("open"),$("#codigo").focus()},e.entrada=function(){var t=$("#item").find(":selected").text(),r=$("#preco").val(),n=$("#quantidade").val(),o=$("#item").find(":selected").val(),a=new Date,i=a.getMonth()+1,s=a.getFullYear();s%=100,i<10&&(i="0"+i),o=o+i+s+r;var u={item:t,preco:r,quantidade:n,codigo:o};e.adicionando.push(u)},e.concluir=function(){var r=[];for(i=0;i<e.adicionando.length;i++)for(j=0;j<e.adicionando[i].quantidade;j++)r.push(e.adicionando[i].codigo);console.log(r);var n=e.usuario.estoque.concat(r);t.atualizaEstoque(e.usuario._id,n).then(function(o){t.atualizaHistorico(r),e.usuario.estoque=n,e.pecas=e.processaPecas(e.usuario.estoque),e.adicionando=[],$("#entrada").modal("close")},function(e){Materialize.toast("Falha ao acessar o servidor",5e3)})}}]).controller("EncomendasEstoqueController",["$scope","encomendasService","consultoresService","userService","estoqueService",function(e,t,r,n,o){$(document).ready(function(){$("ul.tabs").tabs(),$(".collapsible").collapsible()}),$("#enviar").modal(),e.status=["Aprovada"],e.codigo=["BG"],e.estoqueTemp=[],e.filtroStatus=function(t){return e.status.indexOf(t.status)!==-1},e.porItem=function(t){var r=t.substr(0,2);return e.codigo.indexOf(r)!==-1},e.encomendas={},carregaEncomendas=function(){t.todas().then(function(t){e.encomendas=t.data,$(".tooltipped").tooltip({delay:50})},function(e){Materialize.toast("Falha ao cerregar dados!",5e3)})},carregaEncomendas(),e.modalEncomenda=function(t){switch(t.item){case"Anel":e.codigo=["AN"];break;case"Brinco Pequeno":e.codigo=["BP"];break;case"Brinco Grande":e.codigo=["BG"];break;case"Cordão Feminino":e.codigo=["CF"];break;case"Cordão Masculino":e.codigo=["CM"];break;case"Pingente":e.codigo=["PN"];break;case"Pulseira Feminina":e.codigo=["PF"];break;case"Pulseira Masculina":e.codigo=["PM"];break;case"Escapulário":e.codigo=["ES"];break;case"Personalizado":e.codigo=[""];break;case"Reposição padrão":e.codigo=["AN","BP","BG","CF","CM","PN","PF","PM","ES"]}e.encomendaAtual=t,e.estoqueTemp=[],e.estoqueTemp=e.estoqueTemp.concat(e.usuario.estoque),console.log(e.usuario.estoque),e.pecasEnviadas=[],$("#enviar").modal("open")},e.enviar=function(){o.atualizaEstoque(e.usuario._id,e.estoqueTemp).then(function(r){o.entradaEstoque(e.encomendaAtual.donoId,e.pecasEnviadas).then(function(r){t.atualizarStatus(e.encomendaAtual._id,"Enviada").then(function(e){Materialize.toast("Enviada!",5e3),carregaEncomendas()},function(e){Materialize.toast(e.err.message,5e3)})},function(e){Materialize.toast(e.err.message,5e3)})},function(e){Materialize.toast(e.err.message,5e3)}),e.usuario.estoque=[],e.usuario.estoque=e.usuario.estoque.concat(e.estoqueTemp),$("#enviar").modal("close")},e.enviado=function(t){indice=e.estoqueTemp.indexOf(t),cod=e.estoqueTemp[indice],e.deletaElemento(e.estoqueTemp,indice),e.pecasEnviadas.push(cod)},e.devolvido=function(t){indice=e.pecasEnviadas.indexOf(t),cod=e.pecasEnviadas[indice],e.deletaElemento(e.pecasEnviadas,indice),e.estoqueTemp.push(cod)}}]),angular.module("ambaya").service("userService",["$http",function(e){this.novo=function(t){return e.post("/users/register",t)},this.carregaUm=function(t){return e.get("/users/"+t)},this.deletaUm=function(t){return e.delete("/users/"+t)}}]).service("loginService",["$localStorage","$http","$location",function(e,t,r){this.login=function(e){return t.post("/users/login",e)},this.check=function(){return e.logado},this.getUser=function(){return!!e.logado&&e.usuario},this.logout=function(){e.logado=!1}}]).service("estoqueService",["$http",function(e){this.atualizaEstoque=function(t,r){return e.post("/users/atualizar/",{_id:t,update:{estoque:r}})},this.entradaEstoque=function(t,r){return e.post("/users/entrada/",{_id:t,entrada:r})},this.atualizaHistorico=function(t){return e.post("/historico/entrada",{entrada:t})}}]).service("controladoriaService",["$http",function(e){this.consultores=function(){return e.get("users/consultores/num")},this.supervisores=function(){return e.get("users/supervisores/num")}}]).service("consultoresService",["$http",function(e){this.todos=function(){return e.get("users/consultores/")},this.porSupervisor=function(t){return e.get("users/consultores/"+t)},this.aprovar=function(t){return e.post("/users/atualizar/",{_id:t,update:{status:"Aprovado"}})},this.desaprovar=function(t){return e.post("/users/atualizar/",{_id:t,update:{status:"Inativo"}})},this.venda=function(t){
return e.post("/users/atualizar/",{_id:t._id,update:{estoque:t.estoque,vendido:t.vendido,totalVendido:t.totalVendido}})}}]).service("supervisoresService",["$http",function(e){this.todos=function(){return e.get("users/supervisores/")}}]).service("encomendasService",["$http",function(e){this.nova=function(t){return e.post("/encomendas/",t)},this.todas=function(){return e.get("/encomendas/")},this.supervisor=function(t){return e.get("/encomendas/supervisor/"+t)},this.consultor=function(t){return e.get("/encomendas/consultor/"+t)},this.excluir=function(t){return e.delete("/encomendas/"+t)},this.atualizarStatus=function(t,r){return e.post("/encomendas/atualizar/",{_id:t,update:{status:r}})},this.totalAprovado=function(){return e.post("/encomendas/total/",{status:"Aprovada"})}}]);