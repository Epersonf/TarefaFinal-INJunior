"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,r){"use strict";function n(e,t){return B(new(B(function(){},{prototype:e})),t)}function o(e){return K(arguments,function(t){t!==e&&K(t,function(t,r){e.hasOwnProperty(r)||(e[r]=t)})}),e}function a(e,t){var r=[];for(var n in e.path){if(e.path[n]!==t.path[n])break;r.push(e.path[n])}return r}function i(e){if(Object.keys)return Object.keys(e);var t=[];return K(e,function(e,r){t.push(r)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var r=e.length>>>0,n=Number(arguments[2])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=r);n<r;n++)if(n in e&&e[n]===t)return n;return-1}function u(e,t,r,n){var o,u=a(r,n),l={},c=[];for(var f in u)if(u[f]&&u[f].params&&(o=i(u[f].params),o.length))for(var p in o)s(c,o[p])>=0||(c.push(o[p]),l[o[p]]=e[o[p]]);return B({},l,t)}function l(e,t,r){if(!r){r=[];for(var n in e)r.push(n)}for(var o=0;o<r.length;o++){var a=r[o];if(e[a]!=t[a])return!1}return!0}function c(e,t){var r={};return K(e,function(e){r[e]=t[e]}),r}function f(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return K(r,function(r){r in e&&(t[r]=e[r])}),t}function p(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var n in e)s(r,n)==-1&&(t[n]=e[n]);return t}function d(e,t){var r=T(e),n=r?[]:{};return K(e,function(e,o){t(e,o)&&(n[r?n.length:o]=e)}),n}function v(e,t){var r=T(e)?[]:{};return K(e,function(e,n){r[n]=t(e,n)}),r}function h(e){return e.then(r,function(){})&&e}function m(e,t){var n=1,a=2,u={},l=[],c=u,f=B(e.when(u),{$$promises:u,$$values:u});this.study=function(u){function d(e,r){if(y[r]!==a){if(g.push(r),y[r]===n)throw g.splice(0,s(g,r)),new Error("Cyclic dependency: "+g.join(" -> "));if(y[r]=n,N(e))$.push(r,[function(){return t.get(e)}],l);else{var o=t.annotate(e);K(o,function(e){e!==r&&u.hasOwnProperty(e)&&d(u[e],e)}),$.push(r,e,o)}g.pop(),y[r]=a}}function v(e){return _(e)&&e.then&&e.$$promises}if(!_(u))throw new Error("'invocables' must be an object");var m=i(u||{}),$=[],g=[],y={};return K(u,d),u=g=y=null,function(n,a,i){function s(){--S||(b||o(w,a.$$values),g.$$values=w,g.$$promises=g.$$promises||!0,delete g.$$inheritedValues,d.resolve(w))}function u(e){g.$$failure=e,d.reject(e)}function l(r,o,a){function l(e){f.reject(e),u(e)}function c(){if(!R(g.$$failure))try{f.resolve(t.invoke(o,i,w)),f.promise.then(function(e){w[r]=e,s()},l)}catch(e){l(e)}}var f=e.defer(),p=0;K(a,function(e){y.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(p++,y[e].then(function(t){w[e]=t,--p||c()},l))}),p||c(),y[r]=h(f.promise)}if(v(n)&&i===r&&(i=a,a=n,n=null),n){if(!_(n))throw new Error("'locals' must be an object")}else n=c;if(a){if(!v(a))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else a=f;var d=e.defer(),g=h(d.promise),y=g.$$promises={},w=B({},n),S=1+$.length/3,b=!1;if(h(g),R(a.$$failure))return u(a.$$failure),g;a.$$inheritedValues&&o(w,p(a.$$inheritedValues,m)),B(y,a.$$promises),a.$$values?(b=o(w,p(a.$$values,m)),g.$$inheritedValues=p(a.$$values,m),s()):(a.$$inheritedValues&&(g.$$inheritedValues=p(a.$$inheritedValues,m)),a.then(s,u));for(var C=0,k=$.length;C<k;C+=3)n.hasOwnProperty($[C])?s():l($[C],$[C+1],$[C+2]);return g}},this.resolve=function(e,t,r,n){return this.study(e)(t,r,n)}}function $(){var e=t.version.minor<3;this.shouldUnsafelyUseHttp=function(t){e=!!t},this.$get=["$http","$templateCache","$injector",function(t,r,n){return new g(t,r,n,e)}]}function g(e,t,r,n){this.fromConfig=function(e,t,r){return R(e.template)?this.fromString(e.template,t):R(e.templateUrl)?this.fromUrl(e.templateUrl,t):R(e.templateProvider)?this.fromProvider(e.templateProvider,t,r):null},this.fromString=function(e,t){return L(e)?e(t):e},this.fromUrl=function(o,a){return L(o)&&(o=o(a)),null==o?null:n?e.get(o,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data}):r.get("$templateRequest")(o)},this.fromProvider=function(e,t,n){return r.invoke(e,null,n||{params:t})}}function y(e,t,o){function a(t,r,n,o){if(m.push(t),v[t])return v[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(h[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return h[t]=new G.Param(t,r,n,o),h[t]}function i(e,t,r,n){var o=["",""],a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;switch(r){case!1:o=["(",")"+(n?"?":"")];break;case!0:a=a.replace(/\/$/,""),o=["(?:/(",")|/)?"];break;default:o=["("+r+"|",")?"]}return a+o[0]+t+o[1]}function s(o,a){var i,s,u,l,c;return i=o[2]||o[3],c=t.params[i],u=e.substring(p,o.index),s=a?o[4]:o[4]||("*"==o[1]?".*":null),s&&(l=G.type(s)||n(G.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":r)})),{id:i,regexp:s,segment:u,type:l,cfg:c}}t=B({params:{}},_(t)?t:{});var u,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f="^",p=0,d=this.segments=[],v=o?o.params:{},h=this.params=o?o.params.$$new():new G.ParamSet,m=[];this.source=e;for(var $,g,y;(u=l.exec(e))&&($=s(u,!1),!($.segment.indexOf("?")>=0));)g=a($.id,$.type,$.cfg,"path"),f+=i($.segment,g.type.pattern.source,g.squash,g.isOptional),d.push($.segment),p=l.lastIndex;y=e.substring(p);var w=y.indexOf("?");if(w>=0){var S=this.sourceSearch=y.substring(w);if(y=y.substring(0,w),this.sourcePath=e.substring(0,p+w),S.length>0)for(p=0;u=c.exec(S);)$=s(u,!0),g=a($.id,$.type,$.cfg,"search"),p=l.lastIndex}else this.sourcePath=e,this.sourceSearch="";f+=i(y)+(t.strict===!1?"/?":"")+"$",d.push(y),this.regexp=new RegExp(f,t.caseInsensitive?"i":r),this.prefix=d[0],this.$$paramNames=m}function w(e){B(this,e)}function S(){function e(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function o(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function a(){return{strict:h,caseInsensitive:p}}function u(e){return L(e)||T(e)&&L(e[e.length-1])}function l(){for(;b.length;){var e=b.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend($[e.name],f.invoke(e.def))}}function c(e){B(this,e||{})}G=this;var f,p=!1,h=!0,m=!1,$={},g=!0,b=[],C={string:{encode:e,decode:o,is:function(e){return null==e||!R(e)||"string"==typeof e},pattern:/[^\/]*/},int:{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return e!==r&&null!==e&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):r},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):r},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};S.$$getDefaultValue=function(e){if(!u(e.value))return e.value;if(!f)throw new Error("Injectable functions cannot be called at configuration time");return f.invoke(e.value)},this.caseInsensitive=function(e){return R(e)&&(p=e),p},this.strictMode=function(e){return R(e)&&(h=e),h},this.defaultSquashPolicy=function(e){if(!R(e))return m;if(e!==!0&&e!==!1&&!N(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return m=e,e},this.compile=function(e,t){return new y(e,B(a(),t))},this.isMatcher=function(e){if(!_(e))return!1;var t=!0;return K(y.prototype,function(r,n){L(r)&&(t=t&&R(e[n])&&L(e[n]))}),t},this.type=function(e,t,r){if(!R(t))return $[e];if($.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return $[e]=new w(B({name:e},t)),r&&(b.push({name:e,def:r}),g||l()),this},K(C,function(e,t){$[t]=new w(B({name:t},e))}),$=n($,{}),this.$get=["$injector",function(e){return f=e,g=!1,l(),K(C,function(e,t){$[t]||($[t]=new w(e))}),this}],this.Param=function(e,n,o,a){function l(e){var t=_(e)?i(e):[],r=s(t,"value")===-1&&s(t,"type")===-1&&s(t,"squash")===-1&&s(t,"array")===-1;return r&&(e={value:e}),e.$$fn=u(e.value)?e.value:function(){return e.value},e}function c(r,n,o){if(r.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:r.type?t.isString(r.type)?$[r.type]:r.type instanceof w?r.type:new w(r.type):"config"===o?$.any:$.string}function p(){var t={array:"search"===a&&"auto"},r=e.match(/\[\]$/)?{array:!0}:{};return B(t,r,o).array}function h(e,t){var r=e.squash;if(!t||r===!1)return!1;if(!R(r)||null==r)return m;if(r===!0||N(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function g(e,t,n,o){var a,i,u=[{from:"",to:n||t?r:""},{from:null,to:n||t?r:""}];return a=T(e.replace)?e.replace:[],N(o)&&a.push({from:o,to:r}),i=v(a,function(e){return e.from}),d(u,function(e){return s(i,e.from)===-1}).concat(a)}function y(){if(!f)throw new Error("Injectable functions cannot be called at configuration time");var e=f.invoke(o.$$fn);if(null!==e&&e!==r&&!C.type.is(e))throw new Error("Default value ("+e+") for parameter '"+C.id+"' is not an instance of Type ("+C.type.name+")");return e}function S(e){function t(e){return function(t){return t.from===e}}function r(e){var r=v(d(C.replace,t(e)),function(e){return e.to});return r.length?r[0]:e}return e=r(e),R(e)?C.type.$normalize(e):y()}function b(){return"{Param:"+e+" "+n+" squash: '"+P+"' optional: "+x+"}"}var C=this;o=l(o),n=c(o,n,a);var k=p();n=k?n.$asArray(k,"search"===a):n,"string"!==n.name||k||"path"!==a||o.value!==r||(o.value="");var x=o.value!==r,P=h(o,x),E=g(o,k,x,P);B(this,{id:e,type:n,location:a,array:k,squash:P,replace:E,isOptional:x,value:S,dynamic:r,config:o,toString:b})},c.prototype={$$new:function(){return n(this,B(new c,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],r=this,n=i(c.prototype);r;)t.push(r),r=r.$$parent;return t.reverse(),K(t,function(t){K(i(t),function(t){s(e,t)===-1&&s(n,t)===-1&&e.push(t)})}),e},$$values:function(e){var t={},r=this;return K(r.$$keys(),function(n){t[n]=r[n].value(e&&e[n])}),t},$$equals:function(e,t){var r=!0,n=this;return K(n.$$keys(),function(o){var a=e&&e[o],i=t&&t[o];n[o].type.equals(a,i)||(r=!1)}),r},$$validates:function(e){var n,o,a,i,s,u=this.$$keys();for(n=0;n<u.length&&(o=this[u[n]],a=e[u[n]],a!==r&&null!==a||!o.isOptional);n++){if(i=o.type.$normalize(a),!o.type.is(i))return!1;if(s=o.type.encode(i),t.isString(s)&&!o.type.pattern.exec(s))return!1}return!0},$$parent:r},this.ParamSet=c}function b(e,n){function o(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function a(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})}function i(e,t,r){if(!r)return!1;var n=e.invoke(t,t,{$match:r});return!R(n)||n}function s(n,o,a,i,s){function p(e,t,r){return"/"===m?e:t?m.slice(0,-1)+e:r?m.slice(1)+e:e}function d(e){function t(e){var t=e(a,n);return!!t&&(N(t)&&n.replace().url(t),!0)}if(!e||!e.defaultPrevented){h&&n.url()===h,h=r;var o,i=l.length;for(o=0;o<i;o++)if(t(l[o]))return;c&&t(c)}}function v(){return u=u||o.$on("$locationChangeSuccess",d)}var h,m=i.baseHref(),$=n.url();return f||v(),{sync:function(){d()},listen:function(){return v()},update:function(e){return e?void($=n.url()):void(n.url()!==$&&(n.url($),n.replace()))},push:function(e,t,o){var a=e.format(t||{});null!==a&&t&&t["#"]&&(a+="#"+t["#"]),n.url(a),h=o&&o.$$avoidResync?n.url():r,o&&o.replace&&n.replace()},href:function(r,o,a){if(!r.validates(o))return null;var i=e.html5Mode();t.isObject(i)&&(i=i.enabled),i=i&&s.history;var u=r.format(o);if(a=a||{},i||null===u||(u="#"+e.hashPrefix()+u),null!==u&&o&&o["#"]&&(u+="#"+o["#"]),u=p(u,i,a.absolute),!a.absolute||!u)return u;var l=!i&&u?"/":"",c=n.port();return c=80===c||443===c?"":":"+c,[n.protocol(),"://",n.host(),c,l,u].join("")}}}var u,l=[],c=null,f=!1;this.rule=function(e){if(!L(e))throw new Error("'rule' must be a function");return l.push(e),this},this.otherwise=function(e){if(N(e)){var t=e;e=function(){return t}}else if(!L(e))throw new Error("'rule' must be a function");return c=e,this},this.when=function(e,t){var r,s=N(t);if(N(e)&&(e=n.compile(e)),!s&&!L(t)&&!T(t))throw new Error("invalid 'handler' in when()");var u={matcher:function(e,t){return s&&(r=n.compile(t),t=["$match",function(e){return r.format(e)}]),B(function(r,n){return i(r,t,e.exec(n.path(),n.search()))},{prefix:N(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(r=t,t=["$match",function(e){return a(r,e)}]),B(function(r,n){return i(r,t,e.exec(n.path()))},{prefix:o(e)})}},l={matcher:n.isMatcher(e),regex:e instanceof RegExp};for(var c in l)if(l[c])return this.rule(u[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===r&&(e=!0),f=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function C(e,o){function a(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function p(e,t){if(!e)return r;var n=N(e),o=n?e:e.name,i=a(o);if(i){if(!t)throw new Error("No reference point given for path '"+o+"'");t=p(t);for(var s=o.split("."),u=0,l=s.length,c=t;u<l;u++)if(""!==s[u]||0!==u){if("^"!==s[u])break;if(!c.parent)throw new Error("Path '"+o+"' not valid for state '"+t.name+"'");c=c.parent}else c=t;s=s.slice(u).join("."),o=c.name+(c.name&&s?".":"")+s}var f=P[o];return!f||!n&&(n||f!==e&&f.self!==e)?r:f}function d(e,t){E[e]||(E[e]=[]),E[e].push(t)}function m(e){for(var t=E[e]||[];t.length;)$(t.shift())}function $(t){t=n(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var r=t.name;if(!N(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(P.hasOwnProperty(r))throw new Error("State '"+r+"' is already defined");var o=r.indexOf(".")!==-1?r.substring(0,r.lastIndexOf(".")):N(t.parent)?t.parent:_(t.parent)&&N(t.parent.name)?t.parent.name:"";if(o&&!P[o])return d(o,t.self);for(var a in I)L(I[a])&&(t[a]=I[a](t,I.$delegates[a]));return P[r]=t,!t[A]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,r){x.$current.navigable==t&&l(e,r)||x.transitionTo(t,e,{inherit:!0,location:!1})}]),m(r),t}function g(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),r=x.$current.name.split("."),n=0,o=t.length;n<o;n++)"*"===t[n]&&(r[n]="*");return"**"===t[0]&&(r=r.slice(s(r,t[1])),r.unshift("**")),"**"===t[t.length-1]&&(r.splice(s(r,t[t.length-2])+1,Number.MAX_VALUE),r.push("**")),t.length==r.length&&r.join("")===t.join("")}function w(e,t){return N(e)&&!R(t)?I[e]:L(t)&&N(e)?(I[e]&&!I.$delegates[e]&&(I.$delegates[e]=I[e]),I[e]=t,this):this}function S(e,t){return _(e)?t=e:t.name=e,$(t),this}function b(e,o,a,s,l,f,d,m,$){function w(t,r,n,a){var i=e.$broadcast("$stateNotFound",t,r,n);if(i.defaultPrevented)return d.update(),M;if(!i.retry)return null;if(a.$retry)return d.update(),q;var s=x.transition=o.when(i.retry);return s.then(function(){return s!==x.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,r,n),E):(t.options.$retry=!0,x.transitionTo(t.to,t.toParams,t.options))},function(){return M}),d.update(),s}function S(e,r,n,i,u,f){function p(){var r=[];return K(e.views,function(n,o){var i=n.resolve&&n.resolve!==e.resolve?n.resolve:{};i.$template=[function(){return a.load(o,{view:n,locals:u.globals,params:d,notify:f.notify})||""}],r.push(l.resolve(i,u.globals,u.resolve,e).then(function(r){if(L(n.controllerProvider)||T(n.controllerProvider)){var a=t.extend({},i,u.globals);r.$$controller=s.invoke(n.controllerProvider,null,a)}else r.$$controller=n.controller;r.$$state=e,r.$$controllerAs=n.controllerAs,r.$$resolveAs=n.resolveAs,u[o]=r}))}),o.all(r).then(function(){return u.globals})}var d=n?r:c(e.params.$$keys(),r),v={$stateParams:d};u.resolve=l.resolve(e.resolve,v,u.resolve,e);var h=[u.resolve.then(function(e){u.globals=e})];return i&&h.push(i),o.all(h).then(p).then(function(e){return u})}var b=new Error("transition superseded"),E=h(o.reject(b)),I=h(o.reject(new Error("transition prevented"))),M=h(o.reject(new Error("transition aborted"))),q=h(o.reject(new Error("transition failed")));return k.locals={resolve:null,globals:{$stateParams:{}}},x={params:{},current:k.self,$current:k,transition:null},x.reload=function(e){return x.transitionTo(x.current,f,{reload:e||!0,inherit:!1,notify:!0})},x.go=function(e,t,r){return x.transitionTo(e,t,B({inherit:!0,relative:x.$current},r))},x.transitionTo=function(t,r,a){r=r||{},a=B({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},a||{});var i,l=x.$current,v=x.params,m=l.path,$=p(t,a.relative),g=r["#"];if(!R($)){var y={to:t,toParams:r,options:a},P=w(y,l.self,v,a);if(P)return P;if(t=y.to,r=y.toParams,a=y.options,$=p(t,a.relative),!R($)){if(!a.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+a.relative+"'")}}if($[A])throw new Error("Cannot transition to abstract state '"+t+"'");if(a.inherit&&(r=u(f,r||{},x.$current,$)),!$.params.$$validates(r))return q;r=$.params.$$values(r),t=$;var M=t.path,j=0,V=M[j],U=k.locals,O=[];if(a.reload){if(N(a.reload)||_(a.reload)){if(_(a.reload)&&!a.reload.name)throw new Error("Invalid reload state object");var z=a.reload===!0?m[0]:p(a.reload);if(a.reload&&!z)throw new Error("No such reload state '"+(N(a.reload)?a.reload:a.reload.name)+"'");for(;V&&V===m[j]&&V!==z;)U=O[j]=V.locals,j++,V=M[j]}}else for(;V&&V===m[j]&&V.ownParams.$$equals(r,v);)U=O[j]=V.locals,j++,V=M[j];if(C(t,r,l,v,U,a))return g&&(r["#"]=g),x.params=r,J(x.params,f),J(c(t.params.$$keys(),f),t.locals.globals.$stateParams),a.location&&t.navigable&&t.navigable.url&&(d.push(t.navigable.url,r,{$$avoidResync:!0,replace:"replace"===a.location}),d.update(!0)),x.transition=null,o.when(x.current);if(r=c(t.params.$$keys(),r||{}),g&&(r["#"]=g),a.notify&&e.$broadcast("$stateChangeStart",t.self,r,l.self,v,a).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,r,l.self,v),null==x.transition&&d.update(),I;for(var D=o.when(U),F=j;F<M.length;F++,V=M[F])U=O[F]=n(U),D=S(V,r,V===t,D,U,a);var L=x.transition=D.then(function(){var n,o,i;if(x.transition!==L)return e.$broadcast("$stateChangeCancel",t.self,r,l.self,v),E;for(n=m.length-1;n>=j;n--)i=m[n],i.self.onExit&&s.invoke(i.self.onExit,i.self,i.locals.globals),i.locals=null;for(n=j;n<M.length;n++)o=M[n],o.locals=O[n],o.self.onEnter&&s.invoke(o.self.onEnter,o.self,o.locals.globals);return x.transition!==L?(e.$broadcast("$stateChangeCancel",t.self,r,l.self,v),E):(x.$current=t,x.current=t.self,x.params=r,J(x.params,f),x.transition=null,a.location&&t.navigable&&d.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===a.location}),a.notify&&e.$broadcast("$stateChangeSuccess",t.self,r,l.self,v),d.update(!0),x.current)}).then(null,function(n){return n===b?E:x.transition!==L?(e.$broadcast("$stateChangeCancel",t.self,r,l.self,v),E):(x.transition=null,i=e.$broadcast("$stateChangeError",t.self,r,l.self,v,n),i.defaultPrevented||d.update(),o.reject(n))});return h(L),L},x.is=function(e,t,n){n=B({relative:x.$current},n||{});var o=p(e,n.relative);return R(o)?x.$current===o&&(!t||i(t).reduce(function(e,r){var n=o.params[r];return e&&!n||n.type.equals(f[r],t[r])},!0)):r},x.includes=function(e,t,n){if(n=B({relative:x.$current},n||{}),N(e)&&g(e)){if(!y(e))return!1;e=x.$current.name}var o=p(e,n.relative);if(!R(o))return r;if(!R(x.$current.includes[o.name]))return!1;if(!t)return!0;for(var a=i(t),s=0;s<a.length;s++){var u=a[s],l=o.params[u];if(l&&!l.type.equals(f[u],t[u]))return!1}return i(t).reduce(function(e,r){var n=o.params[r];return e&&!n||n.type.equals(f[r],t[r])},!0)},x.href=function(e,t,n){n=B({lossy:!0,inherit:!0,absolute:!1,relative:x.$current},n||{});var o=p(e,n.relative);if(!R(o))return null;n.inherit&&(t=u(f,t||{},x.$current,o));var a=o&&n.lossy?o.navigable:o;return a&&a.url!==r&&null!==a.url?d.href(a.url,c(o.params.$$keys().concat("#"),t||{}),{absolute:n.absolute}):null},x.get=function(e,t){if(0===arguments.length)return v(i(P),function(e){return P[e].self});var r=p(e,t||x.$current);return r&&r.self?r.self:null},x}function C(e,t,r,n,o,a){function i(e,t,r){function n(t){return"search"!=e.params[t].location}var o=e.params.$$keys().filter(n),a=f.apply({},[e.params].concat(o)),i=new G.ParamSet(a);return i.$$equals(t,r)}if(!a.reload&&e===r&&(o===r.locals||e.self.reloadOnSearch===!1&&i(r,n,t)))return!0}var k,x,P={},E={},A="abstract",I={parent:function(e){if(R(e.parent)&&e.parent)return p(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?p(t[1]):k},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=n(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,r={params:e.params||{}};if(N(t))return"^"==t.charAt(0)?o.compile(t.substring(1),r):(e.parent.navigable||k).url.concat(t,r);if(!t||o.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new G.ParamSet;return K(e.params||{},function(e,r){t[r]||(t[r]=new G.Param(r,null,e,"config"))}),t},params:function(e){var t=f(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?B(e.parent.params.$$new(),t):new G.ParamSet},views:function(e){var t={};return K(R(e.views)?e.views:{"":e},function(r,n){n.indexOf("@")<0&&(n+="@"+e.parent.name),r.resolveAs=r.resolveAs||e.resolveAs||"$resolve",t[n]=r}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?B({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};k=$({name:"",url:"^",views:null,abstract:!0}),k.navigable=null,this.decorator=w,this.state=S,this.$get=b,b.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function k(){function e(e,t){return{load:function(e,r){var n,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=B(o,r),r.view&&(n=t.fromConfig(r.view,r.params,r.locals)),n}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function x(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,r){return e?t:function(e){return r(function(){e[0].scrollIntoView()},0,!1)}}]}function P(e,r,n,o,a){function i(){return r.has?function(e){return r.has(e)?r.get(e):null}:function(e){try{return r.get(e)}catch(e){return null}}}function s(e,r){var n=function(){return{enter:function(e,t,r){t.after(e),r()},leave:function(e,t){e.remove(),t()}}};if(c)return{enter:function(e,r,n){t.version.minor>2?c.enter(e,null,r).then(n):c.enter(e,null,r,n)},leave:function(e,r){t.version.minor>2?c.leave(e).then(r):c.leave(e,r)}};if(l){var o=l&&l(r,e);return{enter:function(e,t,r){o.enter(e,null,t),r()},leave:function(e,t){o.leave(e),t()}}}return n()}var u=i(),l=u("$animator"),c=u("$animate"),f={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,i,u){return function(r,i,l){function c(){if(p&&(p.remove(),p=null),v&&(v.$destroy(),v=null),d){var e=d.data("$uiViewAnim");g.leave(d,function(){e.$$animLeave.resolve(),p=null}),p=d,d=null}}function f(s){var f,p=A(r,l,i,o),y=p&&e.$current&&e.$current.locals[p];if(s||y!==h){f=r.$new(),h=e.$current.locals[p],f.$emit("$viewContentLoading",p);var w=u(f,function(e){var o=a.defer(),s=a.defer(),u={$animEnter:o.promise,$animLeave:s.promise,$$animLeave:s};e.data("$uiViewAnim",u),g.enter(e,i,function(){o.resolve(),v&&v.$emit("$viewContentAnimationEnded"),(t.isDefined($)&&!$||r.$eval($))&&n(e)}),c()});d=w,v=f,v.$emit("$viewContentLoaded",p),v.$eval(m)}}var p,d,v,h,m=l.onload||"",$=l.autoscroll,g=s(l,r);i.inheritedData("$uiView"),r.$on("$stateChangeSuccess",function(){f(!1)}),f(!0)}}};return f}function E(e,r,n,o){return{restrict:"ECA",priority:-400,compile:function(a){var i=a.html();return a.empty?a.empty():a[0].innerHTML=null,function(a,s,u){var l=n.$current,c=A(a,u,s,o),f=l&&l.locals[c];if(!f)return s.html(i),void e(s.contents())(a);s.data("$uiView",{name:c,state:f.$$state}),s.html(f.$template?f.$template:i);var p=t.extend({},f);a[f.$$resolveAs]=p;var d=e(s.contents());if(f.$$controller){f.$scope=a,f.$element=s;var v=r(f.$$controller,f);f.$$controllerAs&&(a[f.$$controllerAs]=v,a[f.$$controllerAs][f.$$resolveAs]=p),L(v.$onInit)&&v.$onInit(),s.data("$ngControllerController",v),s.children().data("$ngControllerController",v)}d(a)}}}}function A(e,t,r,n){var o=n(t.uiView||t.name||"")(e),a=r.inheritedData("$uiView");return o.indexOf("@")>=0?o:o+"@"+(a?a.state.name:"")}function I(e,t){var r,n=e.match(/^\s*({[^}]*})\s*$/);if(n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function M(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function q(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),r="FORM"===e[0].nodeName;return{attr:r?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!r}}function j(e,t,r,n,o){return function(a){var i=a.which||a.button,s=o();if(!(i>1||a.ctrlKey||a.metaKey||a.shiftKey||e.attr("target"))){var u=r(function(){t.go(s.state,s.params,s.options)});a.preventDefault();var l=n.isAnchor&&!s.href?1:0;a.preventDefault=function(){l--<=0&&r.cancel(u)}}}}function V(e,t){return{relative:M(e)||t.$current,inherit:!0}}function U(e,r){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,o,a,i){var s,u=I(a.uiSref,e.current.name),l={state:u.state,href:null,params:null},c=q(o),f=i[1]||i[0],p=null;l.options=B(V(o,e),a.uiSrefOpts?n.$eval(a.uiSrefOpts):{});var d=function(r){r&&(l.params=t.copy(r)),l.href=e.href(u.state,l.params,l.options),p&&p(),f&&(p=f.$$addStateInfo(u.state,l.params)),null!==l.href&&a.$set(c.attr,l.href)};u.paramExpr&&(n.$watch(u.paramExpr,function(e){e!==l.params&&d(e)},!0),l.params=t.copy(n.$eval(u.paramExpr))),d(),c.clickable&&(s=j(o,e,r,c,function(){return l}),o[o.on?"on":"bind"]("click",s),n.$on("$destroy",function(){o[o.off?"off":"unbind"]("click",s)}))}}}function O(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,n,o,a){function i(t){p.state=t[0],p.params=t[1],p.options=t[2],p.href=e.href(p.state,p.params,p.options),d&&d(),l&&(d=l.$$addStateInfo(p.state,p.params)),p.href&&o.$set(u.attr,p.href)}var s,u=q(n),l=a[1]||a[0],c=[o.uiState,o.uiStateParams||null,o.uiStateOpts||null],f="["+c.map(function(e){return e||"null"}).join(", ")+"]",p={state:null,params:null,options:null,href:null},d=null;r.$watch(f,i,!0),i(r.$eval(f)),u.clickable&&(s=j(n,e,t,u,function(){return p}),n[n.on?"on":"bind"]("click",s),r.$on("$destroy",function(){n[n.off?"off":"unbind"]("click",s)}))}}}function z(e,t,r){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,n,o,a){function i(t,r,o){var a=e.get(t,M(n)),i=s(t,r),u={state:a||{name:t},params:r,hash:i};return h.push(u),m[i]=o,function(){var e=h.indexOf(u);e!==-1&&h.splice(e,1)}}function s(e,r){if(!N(e))throw new Error("state should be a string");return _(r)?e+Y(r):(r=t.$eval(r),_(r)?e+Y(r):e)}function u(){for(var e=0;e<h.length;e++)f(h[e].state,h[e].params)?l(n,m[h[e].hash]):c(n,m[h[e].hash]),p(h[e].state,h[e].params)?l(n,d):c(n,d)}function l(e,t){a(function(){e.addClass(t)})}function c(e,t){e.removeClass(t)}function f(t,r){return e.includes(t.name,r)}function p(t,r){return e.is(t.name,r)}var d,v,h=[],m={};d=r(o.uiSrefActiveEq||"",!1)(t);try{v=t.$eval(o.uiSrefActive)}catch(e){}v=v||r(o.uiSrefActive||"",!1)(t),_(v)&&K(v,function(r,n){if(N(r)){var o=I(r,e.current.name);i(o.state,t.$eval(o.paramExpr),n)}}),this.$$addStateInfo=function(e,t){if(!(_(v)&&h.length>0)){var r=i(e,t,v);return u(),r}},t.$on("$stateChangeSuccess",u),u()}]}}function D(e){var t=function(t,r){return e.is(t,r)};return t.$stateful=!0,t}function F(e){var t=function(t,r,n){return e.includes(t,r,n)};return t.$stateful=!0,t}var R=t.isDefined,L=t.isFunction,N=t.isString,_=t.isObject,T=t.isArray,K=t.forEach,B=t.extend,J=t.copy,Y=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),m.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",m),t.module("ui.router.util").provider("$templateFactory",$);var G;y.prototype.concat=function(e,t){var r={caseInsensitive:G.caseInsensitive(),strict:G.strictMode(),squash:G.defaultSquashPolicy()};return new y(this.sourcePath+e+this.sourceSearch,B(r,t),this)},y.prototype.toString=function(){return this.source},y.prototype.exec=function(e,t){function r(e){function t(e){return e.split("").reverse().join("")}function r(e){return e.replace(/\\-/g,"-")}var n=t(e).split(/-(?!\\)/),o=v(n,t);return v(o,r).reverse()}var n=this.regexp.exec(e);if(!n)return null;t=t||{};var o,a,i,s=this.parameters(),u=s.length,l=this.segments.length-1,c={};if(l!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var f,p;for(o=0;o<l;o++){for(i=s[o],f=this.params[i],p=n[o+1],a=0;a<f.replace.length;a++)f.replace[a].from===p&&(p=f.replace[a].to);p&&f.array===!0&&(p=r(p)),R(p)&&(p=f.type.decode(p)),c[i]=f.value(p)}for(;o<u;o++){for(i=s[o],c[i]=this.params[i].value(t[i]),f=this.params[i],p=t[i],a=0;a<f.replace.length;a++)f.replace[a].from===p&&(p=f.replace[a].to);R(p)&&(p=f.type.decode(p)),c[i]=f.value(p)}return c},y.prototype.parameters=function(e){return R(e)?this.params[e]||null:this.$$paramNames},y.prototype.validates=function(e){return this.params.$$validates(e)},y.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var r=this.segments,n=this.parameters(),o=this.params;if(!this.validates(e))return null;var a,i=!1,s=r.length-1,u=n.length,l=r[0];for(a=0;a<u;a++){var c=a<s,f=n[a],p=o[f],d=p.value(e[f]),h=p.isOptional&&p.type.equals(p.value(),d),m=!!h&&p.squash,$=p.type.encode(d);if(c){var g=r[a+1],y=a+1===s;if(m===!1)null!=$&&(l+=T($)?v($,t).join("-"):encodeURIComponent($)),l+=g;else if(m===!0){var w=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=g.match(w)[1]}else N(m)&&(l+=m+g);y&&p.squash===!0&&"/"===l.slice(-1)&&(l=l.slice(0,-1))}else{if(null==$||h&&m!==!1)continue;if(T($)||($=[$]),0===$.length)continue;$=v($,encodeURIComponent).join("&"+f+"="),l+=(i?"&":"?")+(f+"="+$),i=!0}}return l},w.prototype.is=function(e,t){return!0},w.prototype.encode=function(e,t){return e},w.prototype.decode=function(e,t){return e},w.prototype.equals=function(e,t){return e==t},w.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},w.prototype.pattern=/.*/,w.prototype.toString=function(){return"{Type:"+this.name+"}"},w.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},w.prototype.$asArray=function(e,t){function n(e,t){function n(e,t){return function(){return e[t].apply(e,arguments)}}function o(e){return T(e)?e:R(e)?[e]:[]}function a(e){switch(e.length){case 0:return r;case 1:return"auto"===t?e[0]:e;default:return e}}function i(e){return!e}function s(e,t){return function(r){if(T(r)&&0===r.length)return r;r=o(r);var n=v(r,e);return t===!0?0===d(n,i).length:a(n)}}function u(e){return function(t,r){var n=o(t),a=o(r);if(n.length!==a.length)return!1;
for(var i=0;i<n.length;i++)if(!e(n[i],a[i]))return!1;return!0}}this.encode=s(n(e,"encode")),this.decode=s(n(e,"decode")),this.is=s(n(e,"is"),!0),this.equals=u(n(e,"equals")),this.pattern=e.pattern,this.$normalize=s(n(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new n(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",S),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),b.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",b),C.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",C).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),k.$inject=[],t.module("ui.router.state").provider("$view",k),t.module("ui.router.state").provider("$uiViewScroll",x),P.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],E.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",P),t.module("ui.router.state").directive("uiView",E),U.$inject=["$state","$timeout"],O.$inject=["$state","$timeout"],z.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",U).directive("uiSrefActive",z).directive("uiSrefActiveEq",z).directive("uiState",O),D.$inject=["$state"],F.$inject=["$state"],t.module("ui.router.state").filter("isState",D).filter("includedByState",F)}(window,window.angular),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery||window.Zepto)}(function(e){var t=function(t,r,n){var o,a,i=this;t=e(t),r="function"==typeof r?r(t.val(),void 0,t,n):r;var s={getCaret:function(){try{var e,r=0,n=t.get(0),o=document.selection,a=n.selectionStart;return o&&!~navigator.appVersion.indexOf("MSIE 10")?(e=o.createRange(),e.moveStart("character",t.is("input")?-t.val().length:-t.text().length),r=e.text.length):(a||"0"===a)&&(r=a),r}catch(e){}},setCaret:function(e){try{if(t.is(":focus")){var r,n=t.get(0);n.setSelectionRange?n.setSelectionRange(e,e):n.createTextRange&&(r=n.createTextRange(),r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select())}}catch(e){}},events:function(){t.on("keydown.mask",function(){o=s.val()}).on("keyup.mask",s.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){o===t.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("focusout.mask",function(){n.clearIfNotMatch&&!a.test(s.val())&&s.val("")})},getRegexMask:function(){for(var e,t,n,o,a=[],s=0;s<r.length;s++)(e=i.translation[r[s]])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=e.optional,(e=e.recursive)?(a.push(r[s]),o={digit:r[s],pattern:t}):a.push(n||e?t+"?":t)):a.push(r[s].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=a.join(""),o&&(a=a.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(a)},destroyEvents:function(){t.off("keydown keyup paste drop change blur focusout DOMNodeInserted ".split(" ").join(".mask ")).removeData("changeCalled")},val:function(e){var r=t.is("input");return 0<arguments.length?r?t.val(e):t.text(e):r?t.val():t.text()},getMCharsBeforeCount:function(e,t){for(var n=0,o=0,a=r.length;o<a&&o<e;o++)i.translation[r.charAt(o)]||(e=t?e+1:e,n++);return n},caretPos:function(e,t,n,o){return i.translation[r.charAt(Math.min(e-1,r.length-1))]?Math.min(e+n-t-o,n):s.caretPos(e+1,t,n,o)},behaviour:function(t){t=t||window.event;var r=t.keyCode||t.which;if(-1===e.inArray(r,i.byPassKeys)){var n=s.getCaret(),o=s.val(),a=o.length,u=n<a,l=s.getMasked(),c=l.length,f=s.getMCharsBeforeCount(c-1)-s.getMCharsBeforeCount(a-1);return l!==o&&s.val(l),!u||65===r&&t.ctrlKey||(8!==r&&46!==r&&(n=s.caretPos(n,a,c,f)),s.setCaret(n)),s.callbacks(t)}},getMasked:function(e){var t,o,a=[],u=s.val(),l=0,c=r.length,f=0,p=u.length,d=1,v="push",h=-1;for(n.reverse?(v="unshift",d=-1,t=0,l=c-1,f=p-1,o=function(){return-1<l&&-1<f}):(t=c-1,o=function(){return l<c&&f<p});o();){var m=r.charAt(l),$=u.charAt(f),g=i.translation[m];g?($.match(g.pattern)?(a[v]($),g.recursive&&(-1===h?h=l:l===t&&(l=h-d),t===h&&(l-=d)),l+=d):g.optional&&(l+=d,f-=d),f+=d):(e||a[v](m),$===m&&(f+=d),l+=d)}return e=r.charAt(t),c!==p+1||i.translation[e]||a.push(e),a.join("")},callbacks:function(e){var a=s.val(),i=a!==o;!0===i&&"function"==typeof n.onChange&&n.onChange(a,e,t,n),!0===i&&"function"==typeof n.onKeyPress&&n.onKeyPress(a,e,t,n),"function"==typeof n.onComplete&&a.length===r.length&&n.onComplete(a,e,t,n)}};i.mask=r,i.options=n,i.remove=function(){var e;return s.destroyEvents(),s.val(i.getCleanVal()).removeAttr("maxlength"),e=s.getCaret(),s.setCaret(e-s.getMCharsBeforeCount(e)),t},i.getCleanVal=function(){return s.getMasked(!0)},i.init=function(){n=n||{},i.byPassKeys=[9,16,17,18,36,37,38,39,40,91],i.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},i.translation=e.extend({},i.translation,n.translation),i=e.extend(!0,{},i,n),a=s.getRegexMask(),!1!==n.maxlength&&t.attr("maxlength",r.length),n.placeholder&&t.attr("placeholder",n.placeholder),t.attr("autocomplete","off"),s.destroyEvents(),s.events();var o=s.getCaret();s.val(s.getMasked()),s.setCaret(o+s.getMCharsBeforeCount(o,!0))}()},r={},n=function(){var t=e(this),r={};t.attr("data-mask-reverse")&&(r.reverse=!0),"false"===t.attr("data-mask-maxlength")&&(r.maxlength=!1),t.attr("data-mask-clearifnotmatch")&&(r.clearIfNotMatch=!0),t.mask(t.attr("data-mask"),r)};e.fn.mask=function(n,o){var a=this.selector,i=function(){var r=e(this).data("mask"),a=JSON.stringify;if("object"!=typeof r||a(r.options)!==a(o)||r.mask!==n)return e(this).data("mask",new t(this,n,o))};this.each(i),a&&!r[a]&&(r[a]=!0,setTimeout(function(){e(document).on("DOMNodeInserted.mask",a,i)},500))},e.fn.unmask=function(){try{return this.each(function(){e(this).data("mask").remove().removeData("mask")})}catch(e){}},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e("*[data-mask]").each(n),e(document).on("DOMNodeInserted.mask","*[data-mask]",n)}),!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):e.hasOwnProperty("angular")?t(e.angular):"object"==typeof exports&&(module.exports=t(require("angular")))}(this,function(e){"use strict";function t(e,t){var r;try{r=e[t]}catch(e){r=!1}if(r){var n="__"+Math.round(1e7*Math.random());try{e[t].setItem(n,n),e[t].removeItem(n,n)}catch(e){r=!1}}return r}function r(r){var n=t(window,r);return function(){var o="ngStorage-";this.setKeyPrefix=function(e){if("string"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setKeyPrefix() expects a String.");o=e};var a=e.toJson,i=e.fromJson;this.setSerializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setSerializer expects a function.");a=e},this.setDeserializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setDeserializer expects a function.");i=e},this.supported=function(){return!!n},this.get=function(e){return n&&i(n.getItem(o+e))},this.set=function(e,t){return n&&n.setItem(o+e,a(t))},this.remove=function(e){n&&n.removeItem(o+e)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(n,s,u,l,c){var f,p,d=o.length,v=t(s,r),h=v||(u.warn("This browser does not support Web Storage!"),{setItem:e.noop,getItem:e.noop,removeItem:e.noop}),m={$default:function(t){for(var r in t)e.isDefined(m[r])||(m[r]=e.copy(t[r]));return m.$sync(),m},$reset:function(e){for(var t in m)"$"===t[0]||delete m[t]&&h.removeItem(o+t);return m.$default(e)},$sync:function(){for(var e,t=0,r=h.length;r>t;t++)(e=h.key(t))&&o===e.slice(0,d)&&(m[e.slice(d)]=i(h.getItem(e)))},$apply:function(){var t;if(p=null,!e.equals(m,f)){t=e.copy(f),e.forEach(m,function(r,n){e.isDefined(r)&&"$"!==n[0]&&(h.setItem(o+n,a(r)),delete t[n])});for(var r in t)h.removeItem(o+r);f=e.copy(m)}},$supported:function(){return!!v}};return m.$sync(),f=e.copy(m),n.$watch(function(){p||(p=l(m.$apply,100,!1))}),s.addEventListener&&s.addEventListener("storage",function(t){if(t.key){var r=c[0];r.hasFocus&&r.hasFocus()||o!==t.key.slice(0,d)||(t.newValue?m[t.key.slice(d)]=i(t.newValue):delete m[t.key.slice(d)],f=e.copy(m),n.$apply())}}),s.addEventListener&&s.addEventListener("beforeunload",function(){m.$apply()}),m}]}}return e=e&&e.module?e:window.angular,e.module("ngStorage",[]).provider("$localStorage",r("localStorage")).provider("$sessionStorage",r("sessionStorage"))}),angular.module("ambaya",["ui.router","ngStorage"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("inicio");var r={name:"Início",url:"/inicio",views:{Consultor:{templateUrl:"views/consultor/inicio.html",controller:"ConsultorInicioController"},Supervisor:{templateUrl:"views/supervisor/inicio.html",controller:"SupervisorInicioController"},Controladoria:{templateUrl:"views/controladoria/inicio.html",controller:"ControladoriaInicioController"},Estoque:{templateUrl:"views/estoque/inicio.html",controller:"EstoqueInicioController"},Login:{templateUrl:"login.html"}}},n={name:"Consultores",url:"/consultores",views:{Supervisor:{templateUrl:"views/supervisor/consultores.html",controller:"ConsultoresSupervisorController"},Controladoria:{templateUrl:"views/controladoria/consultores.html",controller:"ConsultoresControladoriaController"},Login:{templateUrl:"login.html"}}},o={name:"Consultor",url:"/consultor/{consultorId}",views:{Supervisor:{templateUrl:"views/supervisor/consultor.html",controller:"ConsultorController"},Controladoria:{templateUrl:"views/controladoria/consultor.html",controller:"ConsultorController"},Login:{templateUrl:"login.html"}}},a={name:"Supervisores",url:"/supervisores",views:{Controladoria:{templateUrl:"views/controladoria/supervisores.html",controller:"SupervisoresController"},Login:{templateUrl:"login.html"}}},i={name:"Supervisor",url:"/supervisor/{supervisorId}",controller:"",views:{Controladoria:{templateUrl:"views/controladoria/supervisor.html",controller:"SupervisorController"},Login:{templateUrl:"login.html"}}},s={name:"Acertos",url:"/acertos",controller:"",views:{Supervisor:{templateUrl:"views/supervisor/acertos.html"},Login:{templateUrl:"login.html"}}},u={name:"Estoque",url:"/estoque",controller:"",views:{Supervisor:{templateUrl:"views/supervisor/estoque.html",controller:"EstoqueSupervisorController"},Login:{templateUrl:"login.html"}}},l={name:"Encomendas",url:"/encomendas",controller:"",views:{Supervisor:{templateUrl:"views/supervisor/encomendas.html"},Estoque:{templateUrl:"views/estoque/encomendas.html"},Login:{templateUrl:"login.html"}}},c={name:"Relatórios",url:"/relatorios",controller:"",views:{Controladoria:{templateUrl:"views/controladoria/relatorios.html"},Login:{templateUrl:"login.html"}}};e.state(r),e.state(n),e.state(o),e.state(a),e.state(i),e.state(s),e.state(u),e.state(l),e.state(c)}]),angular.module("ambaya").controller("BaseController",["loginService","$scope","$state","$localStorage",function(e,t,r,n){$(".button-collapse").sideNav({closeOnClick:!0,draggable:!0}),t.usuario={username:"",password:""};var o={Consultor:[{nome:"Início",icone:"home"}],Supervisor:[{nome:"Início",icone:"home"},{nome:"Consultores",icone:"people"},{nome:"Estoque",icone:"business_center"},{nome:"Encomendas",icone:"loop"}],Controladoria:[{nome:"Início",icone:"home"},{nome:"Consultores",icone:"people"},{nome:"Supervisores",icone:"people"}],Estoque:[{nome:"Início",icone:"home"},{nome:"Encomendas",icone:"loop"}]};t.login=function(){e.login(t.usuario).then(function(e){n.usuario=e.data.user,n.token=e.data.token,n.logado=!0,t.usuario=e.data.user,t.rotas=o[t.usuario.tipo],t.tipo=t.usuario.tipo,t.logado=!0,r.reload()},function(e){Materialize.toast("Login inválido",3e3)})},t.sair=function(){e.logout(),t.logado=!1,t.tipo="Login",r.is("Início")?r.reload():r.go("Início")},t.logado=e.check(),t.logado?(t.usuario=e.getUser(),t.rotas=o[t.usuario.tipo],t.tipo=t.usuario.tipo):t.tipo="Login",t.$state=r,t.faltamDias=function(e){return e=new Date(e),Math.floor((e-Date.now())/864e5)},t.deletaElemento=function(e,t){e.splice(t,1)},t.processaPecas=function(e){var t={aneis:[],brincosP:[],brincosG:[],cordoesF:[],cordoesM:[],pingentes:[],pulseirasF:[],pulseirasM:[],tornozeleiras:[],escapularios:[]};for(i=0;i<e.length;i++){switch(tipo=e[i].substr(0,2),valor=e[i].substr(6,2),tipo){case"AN":tipo="aneis";break;case"BP":tipo="brincosP";break;case"BG":tipo="brincosG";break;case"CF":tipo="cordoesF";break;case"CM":tipo="cordoesM";break;case"PI":tipo="pingentes";break;case"PF":tipo="pulseirasF";break;case"PM":tipo="pulseirasM";break;case"TO":tipo="tornozeleiras";break;case"ES":tipo="escapularios"}0!=t[tipo].length?$.grep(t[tipo],function(e){e.val==valor?(e.tot++,existe=!0):existe=!1}):existe=!1,existe||t[tipo].push({val:valor,tot:1})}return t}}]).controller("ControladoriaInicioController",["$scope","controladoriaService",function(e,t){$(".tooltipped").tooltip({delay:50}),t.consultores().then(function(t){e.consultores=t.data},function(e){}),t.supervisores().then(function(t){e.supervisores=t.data},function(e){})}]).controller("ConsultoresControladoriaController",["$scope","consultoresService",function(e,t){$(".tooltipped").tooltip({delay:50}),t.todos().then(function(t){e.consultores=t.data,e.total=e.consultores.length},function(e){Materialize.toast("Falha ao carregar Consultores",5e3)})}]).controller("SupervisoresController",["$scope","supervisoresService","userService",function(e,t,r){$(".cep").mask("00000-000"),$(".cpf").mask("000.000.000-00",{reverse:!0});var n=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},o={onKeyPress:function(e,t,r,o){r.mask(n.apply({},arguments),o)}};$(".telefone").mask(n,o),$(".tooltipped").tooltip({delay:50}),$("select").material_select(),$(".datepicker").pickadate({selectMonths:!0,selectYears:100}),carregaSupervisores=function(){t.todos().then(function(t){e.supervisores=t.data,e.total=e.supervisores.length},function(e){Materialize.toast("Falha ao carregar supervisores!",5e3)})},carregaSupervisores(),e.form={nome:"",sobrenome:"",tipo:"Supervisor",status:"Aprovado",porcentagem:30,estoque:[],vendido:[],investidor:!1,totalVendido:0,proxAcerto:Date.now()+3888e6},$("#adicionar").modal(),e.add=function(){$("#adicionar").modal("open")},e.novo=function(){Date.now()+3888e6;e.form.username=e.form.nome.toLowerCase(),e.form.password=e.form.username,r.novo(e.form).then(function(t){$("#adicionar").modal("close"),e.form={nome:"",sobrenome:"",tipo:"Supervisor",status:"Aprovado",porcentagem:30,estoque:[],vendido:[],investidor:!1,totalVendido:0,proxAcerto:Date.now()+3888e6},Materialize.toast("Supervisor adicionado com sucesso!",5e3),carregaSupervisores()},function(e){Materialize.toast(e.err.message,5e3)})}}]).controller("SupervisorController",["$scope","supervisoresService","userService","consultoresService","$stateParams",function(e,t,r,n,o){$(".cep").mask("00000-000"),$(".cpf").mask("000.000.000-00",{reverse:!0});var a=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},i={onKeyPress:function(e,t,r,n){r.mask(a.apply({},arguments),n)}};$(".telefone").mask(a,i),$(".tooltipped").tooltip({delay:50}),$("select").material_select(),$(".datepicker").pickadate({selectMonths:!0,selectYears:100});var s=o.supervisorId;r.carregaUm(s).then(function(t){e.supervisor=t.data},function(e){Materialize.toast("Falha ao carregar dados",5e3)});var u=function(){n.porSupervisor(s).then(function(t){e.consultores=t.data},function(e){Materialize.toast("Falha ao carregar dados",5e3)})};u(),e.form={nome:"",sobrenome:"",tipo:"Consultor",status:"Aprovado",supervisor:s,porcentagem:10,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},$("#adicionar").modal(),$("#excluir").modal(),e.add=function(){$("#adicionar").modal("open")},e.del=function(){$("#excluir").modal("open")},e.novo=function(){console.log(e.form),e.form.username=e.form.nome.toLowerCase(),e.form.password=e.form.username,r.novo(e.form).then(function(t){$("#adicionar").modal("close"),e.form={nome:"",sobrenome:"",tipo:"Consultor",status:"Aprovado",supervisor:s,porcentagem:10,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},u(),Materialize.toast("Consultor adicionado com sucesso!",5e3)},function(e){Materialize.toast("response.err.message",5e3)})},e.excluir=function(){r.deletaUm(e.supervisor._id).then(function(e){Materialize.toast("Excluido com sucesso!",5e3),window.history.back()},function(e){Materialize.toast("Falha ao excluir",5e3)})}}]).controller("ConsultorController",["$scope","userService","consultoresService","$stateParams",function(e,t,r,n){$(".tooltipped").tooltip({delay:50});var o=n.consultorId;t.carregaUm(o).then(function(t){e.consultor=t.data},function(e){Materialize.toast("Falha ao carregar dados!",3e3)}),$("#excluir").modal(),e.del=function(){$("#excluir").modal("open")},e.excluir=function(){t.deletaUm(e.consultor._id).then(function(e){Materialize.toast("Excluído com sucesso",5e3),window.history.back()},function(e){Materialize.toast("Falha ao excluir",5e3)})},e.aprovar=function(){r.aprovar(o).then(function(t){e.consultor.status="Aprovado"},function(e){Materialize.toast("Falha ao atualizar",5e3)})},e.desaprovar=function(){r.desaprovar(o).then(function(t){e.consultor.status="Inativo"},function(e){Materialize.toast("Falha ao atualizar",5e3)})}}]).controller("SupervisorInicioController",["$scope","supervisoresService","consultoresService",function(e,t,r){$(".tooltipped").tooltip({delay:50}),t.carregaUm(e.usuario._id).then(function(t){e.dados=t.data,r.porSupervisor(e.usuario._id).then(function(t){for(var r=t.data,n={total:0,totalVendido:0,valorVendido:0,totalPecas:0},o=0;o<r.length;o++)n.totalVendido+=r[o].pecasVendidas.length,n.valorVendido+=r[o].vendido,n.totalPecas+=r[o].pecas.length,n.lucro=r[o].vendido*r[o].porcentagem/100;n.total=r.length,e.dados.consultores=n,e.dados.acerto=n.valorVendido-n.lucro-n.valorVendido*e.dados.porcentagem/100},function(e){})},function(e){})}]).controller("ConsultoresSupervisorController",["$scope","consultoresService","userService",function(e,t,r){$(".cep").mask("00000-000"),$(".cpf").mask("000.000.000-00",{reverse:!0});var n=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},o={onKeyPress:function(e,t,r,o){r.mask(n.apply({},arguments),o)}};$(".telefone").mask(n,o),$(".tooltipped").tooltip({delay:50}),$("select").material_select(),$(".datepicker").pickadate({selectMonths:!0,selectYears:100}),carregaConsultores=function(){t.porSupervisor(e.usuario._id).then(function(t){e.consultores=t.data;for(var r={total:0,totalVendido:0,valorVendido:0,totalPecas:0},n=0;n<e.consultores.length;n++)r.totalVendido+=e.consultores[n].vendido.length,r.valorVendido+=e.consultores[n].totalVendido,r.totalPecas+=e.consultores[n].estoque.length;e.valorVendido=r.valorVendido,e.totalPecas=r.totalPecas+r.totalVendido,e.total=e.consultores.length},function(e){Materialize.toast("Falha ao carregar consultores",5e3)})},carregaConsultores(),e.form={nome:"",sobrenome:"",tipo:"Consultor",supervisor:e.usuario._id,porcentagem:10,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},$("#adicionar").modal(),e.add=function(){$("#adicionar").modal("open")},e.novo=function(){console.log(e.form),e.form.username=e.form.nome.toLowerCase(),e.form.password=e.form.username,r.novo(e.form).then(function(t){$("#adicionar").modal("close"),e.form={nome:"",sobrenome:"",tipo:"Consultor",supervisor:e.usuario._id,porcentagem:10,estoque:[],vendido:[],totalVendido:0,proxAcerto:Date.now()+3888e6},Materialize.toast("Consultor adicionado com sucesso!",5e3),carregaConsultores()},function(e){Materialize.toast(e.err.message,5e3)})}}]).controller("EstoqueSupervisorController",["$scope","consultoresService",function(e,t){$(".tooltipped").tooltip({delay:50}),t.porSupervisor(e.usuario._id).then(function(t){e.consultores=t.data;for(var r={total:0,totalVendido:0,valorVendido:0,totalPecas:0},n=0;n<e.consultores.length;n++)r.totalVendido+=e.consultores[n].pecasVendidas.length,r.valorVendido+=e.consultores[n].vendido,r.totalPecas+=e.consultores[n].pecas.length;e.valorVendido=r.valorVendido,e.totalPecas=r.totalPecas+r.totalVendido,e.total=e.consultores.length},function(e){})}]).controller("ConsultorInicioController",["$scope","consultoresService","userService",function(e,t,r){$(".tooltipped").tooltip({delay:50}),e.codigo="",t.carregaUm(e.usuario._id).then(function(t){e.dados=t.data,console.log(e.dados),r.carregaUm(e.dados.supervisor).then(function(t){e.supervisor=t.data},function(e){Materialize.toast("Falha ao carregar dados do supervisor!",3e3,"white")})},function(e){Materialize.toast("Falha ao carregar dados!",3e3)}),e.vender=function(){Materialize.toast(e.codigo+" vendido!",3e3,"white textoPreto"),e.codigo=""}}]).controller("EstoqueInicioController",["$scope","estoqueService",function(e,t){$(".tooltipped").tooltip({delay:50}),$("#entrada").modal(),e.adicionando=[],e.pecas=e.processaPecas(e.usuario.estoque),e.codigo="",e.abrir=function(){$("#entrada").modal("open"),$("#codigo").focus()},e.entrada=function(){e.adicionando.push(e.codigo),e.codigo=""},e.concluir=function(){var r=e.usuario.estoque.concat(e.adicionando);t.atualizaEstoque(e.usuario._id,r).then(function(t){e.usuario.estoque=r,e.pecas=e.processaPecas(e.usuario.estoque),e.adicionando=[],$("#entrada").modal("close")},function(e){Materialize.toast("Falha ao acessar o servidor",5e3)})}}]).controller("UsuariosController",["$scope",function(e){$(".tooltipped").tooltip({delay:50}),e.titulo="Usuários"}]).controller("InicioController",["$scope",function(e){$(".tooltipped").tooltip({delay:50}),e.titulo="Início"}]),angular.module("ambaya").service("userService",["$http",function(e){this.novo=function(t){return e.post("/users/register",t)},this.carregaUm=function(t){return e.get("/users/"+t)},this.deletaUm=function(t){return e.delete("/users/"+t)}}]).service("loginService",["$localStorage","$http","$location",function(e,t,r){this.login=function(e){return t.post("/users/login",e)},this.check=function(){return e.logado},this.getUser=function(){return!!e.logado&&e.usuario},this.logout=function(){e.logado=!1}}]).service("estoqueService",["$http",function(e){this.atualizaEstoque=function(t,r){return e.post("/users/atualizar/",{_id:t,update:{estoque:r}})}}]).service("controladoriaService",["$http",function(e){this.consultores=function(){return e.get("users/consultores/num")},this.supervisores=function(){return e.get("users/supervisores/num")}}]).service("consultoresService",["$http",function(e){this.todos=function(){return e.get("users/consultores/")},this.porSupervisor=function(t){return e.get("users/consultores/"+t)},this.aprovar=function(t){return e.post("/users/atualizar/",{_id:t,update:{status:"Aprovado"}})},this.desaprovar=function(t){return e.post("/users/atualizar/",{_id:t,update:{status:"Inativo"}})}}]).service("supervisoresService",["$http",function(e){this.todos=function(){return e.get("users/supervisores/")}}]);